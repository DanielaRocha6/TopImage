(window["webpackJsonptop-image"]=window["webpackJsonptop-image"]||[]).push([[0],Array(21).concat([function(e,t){t.CONTEST_EVENT="contests",t.CONTEST_DETAIL_EVENT="contest",t.ACTION_INSERT="action_insert",t.ACTION_UPDATE="action_update",t.ACTION_DELETE="action_delete"},,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5cc607db.svg"},,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(166)},,,,,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/magnifying-glass.adf7b08c.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/link.e4498435.svg"},function(e,t,n){e.exports=n.p+"static/media/autorenew.f4d9cf73.svg"},function(e,t,n){var a={"./like.svg":114,"./likeU.svg":115};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=113},function(e,t,n){e.exports=n.p+"static/media/like.a467c6a0.svg"},function(e,t,n){e.exports=n.p+"static/media/likeU.08723e07.svg"},function(e,t,n){var a={"./dislike.svg":117,"./dislikeU.svg":118};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=116},function(e,t,n){e.exports=n.p+"static/media/dislike.3f1544fc.svg"},function(e,t,n){e.exports=n.p+"static/media/dislikeU.921dfa34.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){var a={"./tuto1.png":122,"./tuto2.png":123,"./tuto3.png":124,"./tuto4.png":125,"./tuto5.png":126,"./tuto6.png":127,"./tuto7.png":128,"./tuto8.png":129};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=121},function(e,t,n){e.exports=n.p+"static/media/tuto1.d1ae3bc7.png"},function(e,t,n){e.exports=n.p+"static/media/tuto2.1e3ed942.png"},function(e,t,n){e.exports=n.p+"static/media/tuto3.b105dcc4.png"},function(e,t,n){e.exports=n.p+"static/media/tuto4.e2c8a7aa.png"},function(e,t,n){e.exports=n.p+"static/media/tuto5.4d22a315.png"},function(e,t,n){e.exports=n.p+"static/media/tuto6.45d73162.png"},function(e,t,n){e.exports=n.p+"static/media/tuto7.d8cace18.png"},function(e,t,n){e.exports=n.p+"static/media/tuto8.aeb9cc60.png"},function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/menu.aa9d6fc1.svg"},function(e,t,n){e.exports=n.p+"static/media/help.840adbfd.svg"},function(e,t,n){e.exports=n.p+"static/media/person.0c32117b.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),o=n.n(c),l=(n(74),n(1)),i=n(20),s=n(16),u={token:null,tokenTimeout:null,user:null,refreshToken:null},m=function(e){localStorage.setItem("accessKey",e)},p=function(e){var t=e.tokenTimeout,n=new Date((new Date).getTime()+60*t*60*1e3);for(var a in e.tokenTimeout=n,e)localStorage.setItem(a,JSON.stringify(e[a]))},d=function(){for(var e in u)localStorage.removeItem(e)},f={accessKey:localStorage.getItem("accessKey")};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var v=function(e){return{type:"SET_ACCESS_KEY",payload:e}},g=function(){if(u.token=localStorage.getItem("token"),u.token){for(var e in u)try{u[e]=JSON.parse(localStorage.getItem(e))}catch(n){console.error(n)}if(new Date(u.tokenTimeout)<new Date)for(var t in d(),u)u[t]=null}return u}();function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){return{type:"SET_AUTH",payload:e}},O=function(){return{type:"LOGOUT"}},y=n(15),k={contests:[],curContest:null,activeContests:[]};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){return{type:"ADD_CONTEST",payload:{contest:e}}},T=function(e){return{type:"UPDATE_CONTEST",payload:e}},C=function(e){return{type:"DELETE_CONTEST",payload:{id:e}}},S=function(e){var t=new Date;return{type:"SET_CONTESTS",payload:{contests:e,activeContests:e.filter((function(e){return new Date(e.endDate).getTime()>t.getTime()}))}}},x=function(e){return{type:"SET_CONTEST",payload:{contest:e}}},D="https://top-image.herokuapp.com",P={url:"".concat(D,"/api/"),socketUrl:D};var I=Object(i.b)({contests:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"ADD_CONTEST":return e=a.contests.findIndex((function(e){return e._id===r.payload.id})),t=Object(y.a)(a.contests),-1!==e?t[e]=r.payload.contest:a.contests&&t.push(r.payload.contest),N({},a,{contests:t});case"UPDATE_CONTEST":var c=N({},a.curContest);if(n=r.payload,c._id===n.id&&(c=N({},c,{},n)),e=a.contests.findIndex((function(e){return e._id===r.payload.id})),t=Object(y.a)(a.contests),-1===e)return a;var o=t[e];for(var l in r.payload)o[l]=r.payload[l];return t[e]=o,N({},a,{contests:t,curContest:c});case"DELETE_CONTEST":return e=a.contests.findIndex((function(e){return e._id===r.payload.id})),(t=Object(y.a)(a.contests)).splice(e,1),N({},a,{contests:t});case"SET_INACTIVE_CONTEST":return e=a.activeContests.findIndex((function(e){return e._id===r.id})),(t=Object(y.a)(a.activeContests)).splice(e,1),N({},a,{activeContests:t});case"SET_CONTESTS":return N({},a,{contests:r.payload.contests,activeContests:r.payload.activeContests});case"SET_CONTEST":return N({},a,{curContest:r.payload.contest});default:return a}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return E({},e,{token:t.payload});case"SET_USER":return E({},e,{user:t.payload});case"SET_AUTH":return E({},e,{user:t.payload.user,token:t.payload.token,tokenTimeout:t.payload.tokenTimeout,refreshToken:t.payload.refreshToken});case"LOGOUT":return{user:null,token:null,tokenTimeout:null,refreshToken:null};default:return e}},accessKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(console.log("Action",t.type,t.payload),t.type){case"SET_ACCESS_KEY":return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{accessKey:t.payload});default:return e}},root:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:P}}),A=Object(i.c)(I,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),U=(n(32),n(4)),F=n.n(U),L=n(5),M=n(9),K=n(17),B=n(2),R=(n(80),n(81),n(6)),Y=n.n(R);var W=Object(K.i)((function(e){var t=Object(l.c)((function(e){return e.root.url})),n=Object(l.b)(),c=Object(a.useState)(""),o=Object(B.a)(c,2),i=o[0],s=o[1],u=Object(a.useState)(""),m=Object(B.a)(u,2),d=m[0],f=m[1],b=Object(a.useState)(""),v=Object(B.a)(b,2),g=v[0],_=v[1],E=function(){var a=Object(L.a)(F.a.mark((function a(r){var c,o;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),c=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,i&&c.test(String(i).toLowerCase())){a.next=4;break}return a.abrupt("return",_("You have to use a valid email"));case 4:if(d&&!(d.length<5)){a.next=6;break}return a.abrupt("return",_("The password must have at least 5 characters"));case 6:return a.prev=6,a.next=9,Y.a.post("".concat(t,"users/login"),{email:i,password:d});case 9:o=a.sent,p(o.data),n(h(o.data)),e.history.push("/"),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(6),console.log(a.t0),console.log(a.t0.response);case 19:case"end":return a.stop()}}),a,null,[[6,15]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("form",{className:"loginForm",noValidate:!0,onSubmit:E},r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{id:"email",type:"email",placeholder:"Email","aria-label":"email",value:i.value,onChange:function(e){return s(e.target.value)},autoComplete:"Email",className:"loginForm__input"})),r.a.createElement("label",{htmlFor:"password"},r.a.createElement("input",{id:"password",type:"password",placeholder:"Password","aria-label":"password",value:d.value,onChange:function(e){return f(e.target.value)},autoComplete:"current-password",className:"loginForm__input"})),g?r.a.createElement("p",{className:"loginForm__errorMsg"},g):null,r.a.createElement("button",{className:"loginForm__button ".concat(g?"loginForm__button--error":""),type:"submit"},"Login"))}));n(99);var V=Object(K.i)((function(e){var t=Object(l.c)((function(e){return e.root.url})),n=Object(l.b)(),c=Object(a.useState)(""),o=Object(B.a)(c,2),i=o[0],s=o[1],u=Object(a.useState)(""),m=Object(B.a)(u,2),d=m[0],f=m[1],b=Object(a.useState)(""),v=Object(B.a)(b,2),g=v[0],_=v[1],E=Object(a.useState)(""),O=Object(B.a)(E,2),y=O[0],k=O[1],j=function(){var a=Object(L.a)(F.a.mark((function a(r){var c,o;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),c=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,i&&c.test(String(i).toLowerCase())){a.next=4;break}return a.abrupt("return",k("You have to use a valid email"));case 4:if(d&&!(d.length<5)){a.next=6;break}return a.abrupt("return",k("The password must have at least 5 characters"));case 6:if(g===d){a.next=8;break}return a.abrupt("return",k("Las contrase\xf1as deben coincidir"));case 8:return a.prev=8,a.next=11,Y.a.post("".concat(t,"users/signup"),{email:i,password:d});case 11:o=a.sent,p(o.data),n(h(o.data)),e.history.push("/"),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(8),console.log(a.t0),console.log(a.t0.response);case 21:case"end":return a.stop()}}),a,null,[[8,17]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("form",{className:"signUpForm",noValidate:!0,onSubmit:j},r.a.createElement("input",{type:"email",id:"email",name:"email","aria-label":"email",placeholder:"Email",value:i.value,onChange:function(e){return s(e.target.value)},autoComplete:"Email",className:"signUpForm__input"}),r.a.createElement("input",{type:"password",id:"password","aria-label":"password",placeholder:"Password",value:d.value,onChange:function(e){return f(e.target.value)},autoComplete:"new-password",className:"signUpForm__input"}),r.a.createElement("input",{id:"confirmPassword",type:"password","aria-label":"ConfirmPassword",placeholder:"Confirm Password",value:g.value,onChange:function(e){return _(e.target.value)},autoComplete:"new-password",className:"signUpForm__input"}),y?r.a.createElement("p",{className:"signUpForm__errorMsg"},y):null,r.a.createElement("button",{className:"signUpForm__button ".concat(y?"signUpForm__button--error":""),type:"submit"},"SignUp"))}));var G=function(){var e=Object(a.useState)(!0),t=Object(B.a)(e,2),n=t[0],c=t[1];return r.a.createElement("div",{className:"loginPage"},r.a.createElement("div",{className:"loginPage__container"},r.a.createElement("h1",{className:"loginPage__title"},"Top"),n?r.a.createElement(W,null):r.a.createElement(V,null),r.a.createElement("p",null,n?"Are you new?":"Have you joined?"," ",r.a.createElement("span",{className:"loginPage__butSwitch",onClick:function(){c(!n)}.bind(null)},n?"Sign up":"Login")),r.a.createElement("p",null,"Lost? Check out the tutorial"," ",r.a.createElement("a",{href:"/tutorial",target:"_blank",className:"loginPage__butSwitch"},"Tutorial"))))},H=(n(100),n(101),function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null);Object(a.useLayoutEffect)((function(){t.current&&t.current.focus()}),[t]);var c=[];return e.cancelCBK&&e.cancelText&&c.push(r.a.createElement("button",{className:"modal__button modal__button--cancel",key:1,onClick:function(){e.cancelCBK(),e.close&&e.close()}},e.cancelText)),e.okCBK&&e.okText&&c.push(r.a.createElement("button",{className:"modal__button modal__button--ok",key:0,onClick:function(){e.okCBK(),e.close&&e.close()}},e.okText)),r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal__backdrop",onClick:function(){return e.close?e.close():null}}),r.a.createElement("div",{className:"modal__content",onKeyDown:function(a){9===a.keyCode&&(a.shiftKey?document.activeElement===t.current&&(a.preventDefault(),n.current.focus()):document.activeElement===n.current&&(a.preventDefault(),t.current.focus())),"Escape"===a.key&&e.close()},tabIndex:"0"},r.a.createElement("div",{className:"modal__header"},e.close?r.a.createElement("button",{className:"modal__header__close",onClick:function(){return e.close()},ref:t},"\xd7"):null,r.a.createElement("h4",{className:"modal__header__title"},e.modalHeaderTitle)),r.a.createElement("div",{className:"modal__body"},e.modalBody),r.a.createElement("div",{className:"modal__footer",ref:n,tabIndex:"0"},c)))}),z=(n(102),n(103),function(){return r.a.createElement("div",{className:"lds"},r.a.createElement("div",{className:"lds-backdrop"}),r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),X=(n(50),n(30)),$=n.n(X);n(105),n(106);var J=function(e){var t,n=Object(K.g)(),a=Object(l.b)(),c=function(e){e.private||a(x(e)),n.push("contests/".concat(e._id))},o=function(){return"1"===e.element.private||1===e.element.private};return r.a.createElement("button",{className:"search-item",onClick:function(){c(e.element)},onKeyPress:(t=function(){return c(e.element._id)},function(e){"Enter"===e.key&&t()}),style:{opacity:o()?.7:1}},o()?r.a.createElement("div",{className:"search-item__privateImg"}):null,r.a.createElement("div",{className:"search-item__container"},r.a.createElement("span",{className:"search-item__num"},"X",e.element.images.length)),r.a.createElement("div",{className:"search-item__img",style:{backgroundImage:"url("+function(e){var t=0,n=e[0].url;return e.forEach((function(e){e.likes>t&&(t=e.likes,n=e.url)})),n}(e.element.images)+")"}}),r.a.createElement("h2",{className:"search-item__date"},function(e){if(!e)return e;var t=(e=new Date(e)).getHours(),n=e.getMinutes(),a=t>=12?"pm":"am";return t=(t=(t%=12)||12)<10?"0"+t:t,n=n<10?"0"+n:n,"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear()," ").concat(t,":").concat(n," ").concat(a)}(e.element.endDate)),r.a.createElement("div",{className:"search-item__group"},r.a.createElement("p",{className:"search-item__text"},e.element.username," ",e.element.name),r.a.createElement("p",{className:"search-item__arrow"},"\u25ba")))};var q=function(e){var t,c=Object(a.useState)(e.contests),o=Object(B.a)(c,2),i=o[0],s=o[1],u=Object(l.c)((function(e){return e.auth.user?e.auth.user.email:""})),m=Object(a.useState)(!1),p=Object(B.a)(m,2),d=p[0],f=p[1],b=Object(a.useState)([]),v=Object(B.a)(b,2),g=v[0],_=v[1],E=Object(a.useState)(!0),h=Object(B.a)(E,2),O=h[0],y=h[1],k=Object(a.useState)(!1),j=Object(B.a)(k,2),N=j[0],w=j[1],T=Object(a.useState)(""),C=Object(B.a)(T,2),S=C[0],x=C[1],D=Object(a.useCallback)((function(){f(!0);var t=e.contests.filter((function(t){var n=t.name.includes(S)||t.topic&&t.topic.includes(S)||t.username.startsWith(S),a=new Date(t.endDate);return e.hasDate&&g&&g.length>=2&&(n=n&&new Date(g[0]).getTime()<=a.getTime()&&a.getTime()<=new Date(g[1]).getTime()),O&&(n=n&&(new Date).getTime()<=a.getTime()),N&&(n=n&&t.username===u),n}));s(t)}),[O,g,S,e.contests,N,e.hasDate]),P=function(e){return e.map((function(e,t){return r.a.createElement(J,{key:e._id,element:e,index:t})}))};return Object(a.useEffect)((function(){D(null,!0,null)}),[e.contests,D]),r.a.createElement("div",{className:"filter"},r.a.createElement("div",{className:"filter__criteria"},r.a.createElement("div",{className:"filter__searchBar"},r.a.createElement("img",{className:"filter__searchBar__searchIcon",src:n(107),alt:"search-icon"}),r.a.createElement("input",{className:"filter__searchBar__searchInput","aria-label":"Search",type:"text",placeholder:"Search...",onChange:function(e){return x(e.target.value)}})),e.hasDate?r.a.createElement("div",{className:"filter__actions"},r.a.createElement($.a,{"data-enable-time":!0,name:"date","aria-label":"Select date",placeholder:"Filter dates",options:{minDate:(t=new Date,"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())),minuteIncrement:10,mode:"range"},value:g,onChange:function(e){_(e)},className:"modal__form__input modal__form__input--calendar"}),r.a.createElement("label",null,"Ongoing",r.a.createElement("input",{type:"checkbox",checked:O,onChange:function(){return y(!O)}}))):null),r.a.createElement("div",{className:"filter__tabs"},r.a.createElement("button",{className:"filter__tab filter__tab--left\n           ".concat(N?"":"filter__tab--active"),onClick:function(){return w(!1)}},"All rooms"),r.a.createElement("button",{className:"filter__tab filter__tab--right\n          ".concat(N?"filter__tab--active":""),onClick:function(){return w(!0)}},"My rooms")),r.a.createElement("div",{className:"filter__contests"},d||i.length>0?P(i):P(e.contests)))};n(108),n(109);var Q=function(e){var t=Object(a.useState)(null),n=Object(B.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(null),i=Object(B.a)(l,2),s=i[0],u=i[1];return Object(a.useEffect)((function(){o(null),u(null);var t=function(){return e.file.type};if(t().match("video.*")&&/\.(webm|ogg|mp4)$/i.test(e.file.name)){var n=window.URL.createObjectURL(e.file);u(n)}else if(function(){var e=t();return/(jpe?g|png|gif|bmp|svg)$/i.test(e)}()){var a=new FileReader;a.onload=function(e){o(e.target.result)},a.readAsDataURL(e.file)}}),[e.file]),r.a.createElement("div",{className:"filePreview"},r.a.createElement("div",{className:"filePreview__content"},r.a.createElement("div",{className:"filePreview__file"},c?r.a.createElement("img",{src:c,className:"filePreview__image",alt:e.file.name}):s?r.a.createElement("video",{controls:!0,className:"filePreview__video",src:s+"#t=0.1",preload:"metadata",disablePictureInPicture:!0,controlsList:"nodownload"}):r.a.createElement("p",null,"Incompatible file type")),r.a.createElement("p",{className:"filePreview__remove",onClick:function(){return e.removeFile()}},"X")),r.a.createElement("p",{className:"filePreview__name"},e.file.name))};var Z=function(e){return r.a.createElement("div",{className:"filePreviewList"},e.files.map((function(t,n){return r.a.createElement(Q,{file:t,key:t.name+t.lastModified,removeFile:function(){return e.removeFile(n)}})})))};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(){var e,t=Object(a.useState)(!1),c=Object(B.a)(t,2),o=c[0],i=c[1],s=Object(a.useState)({private:!1}),u=Object(B.a)(s,2),m=u[0],p=u[1],d=Object(a.useState)(!1),f=Object(B.a)(d,2),b=f[0],v=f[1],g=Object(a.useState)(null),_=Object(B.a)(g,2),E=_[0],h=_[1],O=Object(a.useState)([]),k=Object(B.a)(O,2),j=k[0],N=k[1],w=Object(a.useState)(!1),T=Object(B.a)(w,2),C=T[0],S=T[1],x=Object(l.c)((function(e){return e.root.url})),D=Object(l.c)((function(e){return e.auth.token})),P=Object(l.c)((function(e){return e.contests.contests}),[]),I=Object(a.useRef)(null),A=Object(K.g)(),U=function(){var e=Object(L.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m.name&&""!==m.name.trim()){e.next=3;break}return e.abrupt("return",h("You must specify the name of your contest"));case 3:if(m.endDate){e.next=5;break}return e.abrupt("return",h("Your contest needs an end date"));case 5:if(!(m.endDate.getTime()<(new Date).getTime())){e.next=7;break}return e.abrupt("return",h("Your contest end date can`t be before now"));case 7:if(b||j&&0!==j.length){e.next=9;break}return e.abrupt("return",h("You must upload something for contest.... I mean anything"));case 9:if(!b||void 0!==m.limit){e.next=11;break}return e.abrupt("return",h("You need to select a type of image"));case 11:if(!b||m.topic&&""!==m.topic.trim()){e.next=13;break}return e.abrupt("return",h("You must specify the topic of your contest"));case 13:return(n=new FormData).append("name",m.name),m.topic&&n.append("topic",m.topic),m.limit&&n.append("limit",m.limit),void 0!==m.private&&n.append("private",m.private?"1":"0"),n.append("endDate",m.endDate),j.forEach((function(e,t){n.append("img_".concat(t),e)})),console.log("FORM",n),e.next=23,M(n);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(L.a)(F.a.mark((function e(t){var n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),n={headers:{Authorization:"Bearer ".concat(D),"Content-Type":"multipart/form-data"}},e.next=4,Y.a.post("".concat(x,"contests"),t,n);case 4:a=e.sent,S(!1),console.log(a.data),A.push("/contests/".concat(a.data.insertedId));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=r.a.createElement("form",{className:"contestModal",onSubmit:function(e){return U(e)}},r.a.createElement("div",{className:"contestModal__row"},r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"name",className:"contestModal__inputLabel"},"Name"),r.a.createElement("input",{type:"text",name:"name","aria-label":"name",onChange:function(e){h(null),p(te({},m,{name:e.target.value}))}})),r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"date",className:"contestModal__inputLabel"},"End Date"),r.a.createElement($.a,{"data-enable-time":!0,"aria-label":"Date end",name:"date",placeholder:"Contest end date",options:{minDate:(e=new Date,"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())),minuteIncrement:30},value:m.endDate,onChange:function(e){h(null),p(te({},m,{endDate:new Date(e)}))},className:"modal__form__input modal__form__input--calendar"}))),r.a.createElement("div",{className:"contestModal__row"},r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"images",className:"contestModal__inputLabel"},"Your multimedia"),r.a.createElement(Z,{files:j,removeFile:function(e){return function(e){var t=Object(y.a)(j);t.splice(e,1),N(t)}(e)}}),r.a.createElement("button",{className:"contestModal__fileContainer"},j&&0!==j.length?"".concat(j.length," files waiting to be send (add more)"):"Add your multimedia",r.a.createElement("input",{type:"file",id:"multi",accept:"image/*,video/mp4,video/x-m4v,video/*",onChange:function(e){console.log("Files",Array.from(e.target.files));var t=j.concat(Array.from(e.target.files));console.log("Temp Files",t),N(t)},multiple:!0})),r.a.createElement("label",{htmlFor:"useRandomImg",className:"contestModal__inputLabel"},r.a.createElement("input",{name:"useRandomImg",type:"checkbox",checked:b,onChange:function(e){p(te({},m,{limit:b||m.limit?void 0:"1"})),v(!b)}}),"Wanna complete with random images?"),b?r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"topic",className:"contestModal__inputLabel"},"Topic",r.a.createElement("input",{type:"text",name:"topic","aria-label":"topic",onChange:function(e){h(null),p(te({},m,{topic:e.target.value}))}})),r.a.createElement("label",{htmlFor:"limit",className:"contestModal__inputLabel"},"Limit",r.a.createElement("input",{type:"number",name:"limit",value:m.limit?parseInt(m.limit):"",min:"1",step:"1","aria-label":"limit",onChange:function(e){h(null),p(te({},m,{limit:e.target.value}))}}))):null,r.a.createElement("label",{htmlFor:"private",className:"contestModal__inputLabel"},r.a.createElement("input",{name:"private",type:"checkbox",checked:m.private,onChange:function(e){return p(te({},m,{private:!m.private}))}}),"Wanna make your room private?"))),r.a.createElement("div",{className:"contestModal__col"},E?r.a.createElement("p",{className:"modal__form__errorMsg"},E):null,r.a.createElement("button",{className:"home__button",type:"submit"},r.a.createElement("img",{className:"home__img",src:n(51),alt:"App logo. A lightbulb inside an icon"}),"NEW TOP IMAGE")));return r.a.createElement("div",{className:"home"},C?r.a.createElement(z,null):null,r.a.createElement("button",{className:"home__button",onClick:function(){return i(!0)},ref:I},r.a.createElement("img",{className:"home__img",src:n(51),alt:"App logo. A lightbulb inside an icon"}),"NEW TOP IMAGE"),r.a.createElement(q,{contests:P,hasDate:!0}),o?r.a.createElement(H,{close:function(){i(!1),I.current.focus()},modalHeaderTitle:"New Top Image",modalBody:R,okCBK:function(){},cancelCBK:function(){p({name:"",type:"",endDate:null,images:[]}),console.log("Deactivate?"),h(""),i(!1)}}):null)};var ae=Object(K.i)((function(e){var t=Object(l.c)((function(e){return e.auth.tokenTimeout})),n=Object(l.b)();return Object(a.useEffect)((function(){var a=setTimeout((function(){d(),n(O()),e.history.push("/login")}),new Date(t).getTime()-(new Date).getTime());return function(){clearTimeout(a)}}),[e.history,t,n]),r.a.createElement("div",{className:"home__page"},r.a.createElement("div",{className:"home__bg"}),r.a.createElement(ne,null))}));n(110);var re=function(e){var t=Object(l.c)((function(e){return e.contests.curContest})),c=Object(l.c)((function(e){return e.auth.token})),o=Object(l.c)((function(e){return e.auth.user?e.auth.user.email:""})),i=Object(l.c)((function(e){return e.root.url})),s=Object(a.useRef)(null),u=Object(a.useRef)(null),m=Object(a.useMemo)((function(){return Object(y.a)(t.images).sort((function(e,t){return(t.likes||0)+(e.dislikes||0)-(e.likes||0)-(t.dislikes||0)}))}),[t.images]),p=Object(a.useState)(m[0]),d=Object(B.a)(p,2),f=d[0],b=d[1];Object(a.useEffect)((function(){if(f&&m){var e=m.findIndex((function(e){return e.url===f.url}));b(m[e])}else b(m[0])}),[m,f]);var v=function(){var n=Object(L.a)(F.a.mark((function n(a){var r,o;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{Authorization:"Bearer ".concat(c)}},o={isDislike:a},n.prev=2,n.next=5,Y.a.post("".concat(i,"contests/").concat(e.contestId,"/images/").concat(t.images.findIndex((function(e){return e.url===f.url})),"/likes"),o,r);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}(),g=function(){var t=Object(L.a)(F.a.mark((function t(){var n;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:"Bearer ".concat(c)}},t.prev=1,t.next=4,Y.a.put("".concat(i,"contests/").concat(e.contestId,"/accessKey"),{},n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),_=function(e){return window.scrollTo(0,e.current.offsetTop-100)};return r.a.createElement("div",{className:"contest"},t&&"1"===t.private&&o===t.username?r.a.createElement("div",{className:"contest__actions"},r.a.createElement("textarea",{readOnly:!0,ref:s,value:t.accessKey}),r.a.createElement("button",{className:"contest__button",onClick:function(){return s.current.select(),document.execCommand("copy"),s.current.setSelectionRange(0,0),void s.current.blur()}},r.a.createElement("img",{src:n(111),alt:"Copy AccessKey button"})),r.a.createElement("button",{className:"contest__button",onClick:function(){return g()}},r.a.createElement("img",{src:n(112),alt:"Renew AccessKey button"}))):null,r.a.createElement("h2",{className:"contest__name"},t?t.name:null),r.a.createElement("div",{className:"contest__header"},r.a.createElement("p",null,"Topic: ",t.topic),r.a.createElement("p",null,"End Date: ",function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}(t.endDate))),r.a.createElement("div",{className:"contest__main"},r.a.createElement("div",{className:"contest__list"},r.a.createElement("h2",{className:"contest__listName"},"Contest images"),m.map((function(e){return r.a.createElement("div",{className:"contest__preview",key:e.url},r.a.createElement("button",{className:"contest__card",style:{backgroundImage:"url("+e.url+")"},"aria-label":"button",onClick:function(){return function(e){var n=t.images.findIndex((function(t){return t.url===e}));b(t.images[n]),_(u)}(e.url)}}),r.a.createElement("p",{className:"contest__preview--likes"},"Score: ",e.likes-e.dislikes))}))),f?r.a.createElement("div",{className:"contest__featured",ref:u},r.a.createElement("div",{className:"contest__card contest__card--main",style:{backgroundImage:"url("+f.url+")"}}),r.a.createElement("div",{className:"contest__like"},r.a.createElement("button",{className:"contest__icon",alt:"likes for item","aria-label":"like",tabIndex:"0",style:{backgroundImage:"url("+n(113)("./like".concat(-1!==(f.likedBy||[]).findIndex((function(e){return e===o}))?"":"U",".svg"))+")"},onClick:function(){return v(!1)}}),r.a.createElement("button",{className:"contest__icon","aria-label":"dislike",alt:"dislikes for item",style:{backgroundImage:"url("+n(116)("./dislike".concat(-1!==(f.dislikedBy||[]).findIndex((function(e){return e===o}))?"":"U",".svg"))+")"},onClick:function(){return v(!0)}}),r.a.createElement("p",{className:"contest__numLikes"},f.likes-f.dislikes))):null))};n(119);var ce=Object(K.i)((function(){var e=Object(l.c)((function(e){return e.root.url})),t=Object(l.c)((function(e){return e.contests.curContest})),n=Object(l.c)((function(e){return e.auth.token})),c=Object(l.c)((function(e){return e.accessKey.accessKey})),o=Object(K.h)().id,i=Object(K.g)(),s=Object(a.useState)(!1),u=Object(B.a)(s,2),p=u[0],d=u[1],f=Object(a.useState)(!1),b=Object(B.a)(f,2),g=b[0],_=b[1],E=Object(a.useState)(),h=Object(B.a)(E,2),O=h[0],y=h[1],k=Object(a.useState)(!1),j=Object(B.a)(k,2),N=j[0],w=j[1],T=Object(l.b)();Object(a.useEffect)((function(){function a(){return(a=Object(L.a)(F.a.mark((function a(){var r,l;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log("Access Key",c),w(!0),r={headers:{Authorization:"Bearer ".concat(n),"access-key":c}},a.next=6,Y.a.get("".concat(e,"contests/").concat(o),r);case 6:l=a.sent,T(x(l.data)),a.next=17;break;case 10:if(a.prev=10,a.t0=a.catch(0),!t||0!==t.private||t._id!==o){a.next=15;break}return w(!1),a.abrupt("return");case 15:a.t0.response&&403!==a.t0.response.status&&_(!0),d(!0);case 17:return a.prev=17,w(!1),a.finish(17);case 20:case"end":return a.stop()}}),a,null,[[0,10,17,20]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[o,e,T,n]);var C=function(){var t=Object(L.a)(F.a.mark((function t(){var a,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(!0),console.log("access key",O),a={headers:{Authorization:"Bearer ".concat(n),"access-key":O}},t.next=6,Y.a.get("".concat(e,"contests/").concat(o),a);case 6:r=t.sent,d(!1),console.log("Access Key",O),m(O),T(v(O)),T(x(r.data)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:return t.prev=17,w(!1),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,14,17,20]])})));return function(){return t.apply(this,arguments)}}(),S=r.a.createElement("form",{className:"contestModal"},r.a.createElement("input",{type:"text",name:"accessKey","aria-label":"accessKey",onChange:function(e){y(e.target.value)}}));return r.a.createElement("div",{className:"contestPage"},N?r.a.createElement("div",{className:"contestPage__loader"},r.a.createElement(z,null)):null,p?r.a.createElement(H,{modalHeaderTitle:g?"You can\xb4t access private rooms offline :(":"Please enter your access key",modalBody:g?null:S,okCBK:g?null:C,okText:"OK",cancelCBK:function(){i.goBack()},cancelText:"Go Back"}):null,r.a.createElement("div",{className:"contestPage__background"}),t&&!p?r.a.createElement(re,{contestId:o}):null)})),oe=(n(120),[{title:"Sign up",description:"Sign up to TopImage to create contests or see previous contests created by others"},{title:"Create a contest",description:"Click on the New Top Image button to create your own contest"},{title:"Choose contest options",description:"Choose a name and topic for your contest. Select also an end date for it. Finally, you can add your own images or let the app choose their own's based on the topic"},{title:"View contests",description:"See all the current running contests in the grid below"},{title:"Search",description:"Use the search bar to filter contests by name. You can also choose a range of dates and whether the contest has finished or not"},{title:"Go into a contest",description:"Click on a contest preview to go into its details"},{title:"Select an image",description:"Select an image you like from the list on the left to see it bigger and be able to rate it"},{title:"Rate an image",description:"Use the like and dislike options below to rate the image"}]);var le=Object(K.i)((function(e){return r.a.createElement("div",{className:"tutorial"},r.a.createElement("h1",{className:"tutorial__title"},"Tutorial"),r.a.createElement("button",{className:"tutorial__button",onClick:function(){return e.history.push("/")}},"Go to main"),r.a.createElement("div",{className:"tutorial__list"},oe.map((function(e,t){return r.a.createElement("div",{className:"tutorial__item",key:t},r.a.createElement("hr",null),r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description),r.a.createElement("img",{src:n(121)("./tuto"+(t+1)+".png"),alt:"Tutorial step"}))}))))}));n(130);var ie=function(){var e=Object(a.useState)(!1),t=Object(B.a)(e,2),c=t[0],o=t[1],i=Object(a.useState)(!1),s=Object(B.a)(i,2),u=s[0],m=s[1],p=Object(l.b)(),f=function(){d(),p(O())};return r.a.createElement("nav",{className:"nav ".concat(u?"nav--active":"")},r.a.createElement("div",{className:"nav__header"},r.a.createElement("h1",null,r.a.createElement(M.b,{className:"nav__logo",to:"/"},"TOP IMAGE")),r.a.createElement("button",{className:"nav__toggle",onClick:function(){m(!u)}},r.a.createElement("img",{src:n(131),alt:"Toggler for menu when on mobile"}))),r.a.createElement("div",{className:"".concat(u?"nav__actions--active":"nav__actions")},r.a.createElement(M.c,{exact:!0,className:"nav__link",activeClassName:"nav__link--active",to:"/"},"Home"),r.a.createElement("div",{className:"nav__user"},r.a.createElement("a",{href:"/tutorial",target:"_blank"}," ",r.a.createElement("img",{className:"nav__userIcon",src:n(132),alt:"help"})),r.a.createElement("img",{className:"nav__userIcon",src:n(133),alt:"user",onClick:function(){return o(!c)}})),r.a.createElement("div",{className:"nav__user--responsive"},r.a.createElement(M.c,{exact:!0,className:"nav__link",activeClassName:"nav__link--active",to:"/tutorial"},"Tutorial"),r.a.createElement("button",{onClick:f,className:"nav__mockLink"},"Log Out"))),c?r.a.createElement("div",{className:"nav__modal"},r.a.createElement("p",{className:"nav__modalOption",onClick:f},"Cerrar sesi\xf3n")):null)};var se=function(){var e=Object(l.c)((function(e){return e.auth.token}));return r.a.createElement(M.a,null,e?r.a.createElement(ie,null):null,r.a.createElement(K.d,null,r.a.createElement(K.b,{path:"/tutorial",component:le}),r.a.createElement(K.b,{path:"/",exact:!0,render:function(){return e?r.a.createElement(ae,null):r.a.createElement(K.a,{to:"/login"})}}),r.a.createElement(K.b,{path:"/login",render:function(){return e?r.a.createElement(K.a,{to:"/"}):r.a.createElement(G,null)}}),r.a.createElement(K.b,{path:"/contests/:id",render:function(){return e?r.a.createElement(ce,null):r.a.createElement(K.a,{to:"/login"})}}),r.a.createElement(K.b,{path:"*",render:function(){return r.a.createElement(K.a,{to:"/login"})}})))},ue=n(68),me=n.n(ue),pe=n(21);var de=function(){var e=Object(l.c)((function(e){return e.root.url})),t=Object(l.c)((function(e){return e.root.socketUrl})),n=Object(l.c)((function(e){return e.auth.token})),c=Object(l.b)();return Object(a.useEffect)((function(){function a(){return(a=Object(L.a)(F.a.mark((function t(){var a;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.a.get("".concat(e,"contests"),{headers:{Authorization:"Bearer ".concat(n)}});case 3:a=t.sent,c(S(a.data)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}();var r=function(){var e=me()(t);return e.on(pe.CONTEST_EVENT,(function(e){switch(e.action){case pe.ACTION_INSERT:return c(w(e.payload));case pe.ACTION_DELETE:return c(C(e.payload));case pe.ACTION_UPDATE:return c(T(e.payload));default:return}})),e}();return function(){return r.disconnect()}}),[c,t,n,e]),r.a.createElement(se,null)};var fe=function(){return r.a.createElement(l.a,{store:A},r.a.createElement(de,null))},be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(fe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");be?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ve(t,e)}))}}()}]),[[69,1,2]]]);
//# sourceMappingURL=main.9bb48e25.chunk.js.map