(window["webpackJsonptop-image"]=window["webpackJsonptop-image"]||[]).push([[0],Array(24).concat([function(e,t){t.CONTEST_EVENT="contests",t.CONTEST_DETAIL_EVENT="contest",t.ACTION_INSERT="action_insert",t.ACTION_UPDATE="action_update",t.ACTION_DELETE="action_delete"},,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(178)},,,,,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/magnifying-glass.adf7b08c.svg"},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/link.e4498435.svg"},function(e,t,a){e.exports=a.p+"static/media/autorenew.f4d9cf73.svg"},function(e,t,a){var n={"./like.svg":122,"./likeU.svg":123};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=121},function(e,t,a){e.exports=a.p+"static/media/like.a467c6a0.svg"},function(e,t,a){e.exports=a.p+"static/media/likeU.08723e07.svg"},function(e,t,a){var n={"./dislike.svg":125,"./dislikeU.svg":126};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=124},function(e,t,a){e.exports=a.p+"static/media/dislike.3f1544fc.svg"},function(e,t,a){e.exports=a.p+"static/media/dislikeU.921dfa34.svg"},function(e,t,a){},function(e,t,a){},function(e,t,a){var n={"./tuto1.png":130,"./tuto10.png":131,"./tuto2.png":132,"./tuto3.png":133,"./tuto4.png":134,"./tuto5-backup.png":135,"./tuto5.png":136,"./tuto6.png":137,"./tuto7.png":138,"./tuto8.png":139,"./tuto9.png":140};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=129},function(e,t,a){e.exports=a.p+"static/media/tuto1.d1ae3bc7.png"},function(e,t,a){e.exports=a.p+"static/media/tuto10.1d2cd4ef.png"},function(e,t,a){e.exports=a.p+"static/media/tuto2.1e3ed942.png"},function(e,t,a){e.exports=a.p+"static/media/tuto3.933486e3.png"},function(e,t,a){e.exports=a.p+"static/media/tuto4.01d93e73.png"},function(e,t,a){e.exports=a.p+"static/media/tuto5-backup.e2c8a7aa.png"},function(e,t,a){e.exports=a.p+"static/media/tuto5.42414e7e.png"},function(e,t,a){e.exports=a.p+"static/media/tuto6.4d22a315.png"},function(e,t,a){e.exports=a.p+"static/media/tuto7.45d73162.png"},function(e,t,a){e.exports=a.p+"static/media/tuto8.d8cace18.png"},function(e,t,a){e.exports=a.p+"static/media/tuto9.aeb9cc60.png"},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5cc607db.svg"},function(e,t,a){e.exports=a.p+"static/media/menu.aa9d6fc1.svg"},function(e,t,a){e.exports=a.p+"static/media/help.840adbfd.svg"},function(e,t,a){e.exports=a.p+"static/media/person.0c32117b.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),l=(a(80),a(2)),s=a(30),i=a(23),u=a(16),m={token:null,tokenTimeout:null,user:null,refreshToken:null},d=function(e){localStorage.setItem("accessKey",e)},p=function(e){var t=e.tokenTimeout,a=new Date((new Date).getTime()+60*t*60*1e3);for(var n in e.tokenTimeout=a,e)localStorage.setItem(n,JSON.stringify(e[n]))},f=function(){for(var e in m)localStorage.removeItem(e)},v={accessKey:localStorage.getItem("accessKey")};function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var _=function(e){return{type:"SET_ACCESS_KEY",payload:e}},g=function(){if(m.token=localStorage.getItem("token"),m.token){for(var e in m)try{m[e]=JSON.parse(localStorage.getItem(e))}catch(a){console.error(a)}if(new Date(m.tokenTimeout)<new Date)for(var t in f(),m)m[t]=null}return m}();function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=function(e){return{type:"SET_AUTH",payload:e}},y=function(){return{type:"LOGOUT"}},k=a(15),w={contests:[],curContest:null,activeContests:[]};function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=function(e){return{type:"ADD_CONTEST",payload:{contest:e}}},C=function(e){return{type:"UPDATE_CONTEST",payload:e}},S=function(e){return{type:"DELETE_CONTEST",payload:{id:e}}},x=function(e){var t=new Date;return{type:"SET_CONTESTS",payload:{contests:e,activeContests:e.filter((function(e){return new Date(e.endDate).getTime()>t.getTime()}))}}},D=function(e){return{type:"SET_CONTEST",payload:{contest:e}}},P="https://top-image.herokuapp.com",I={url:"".concat(P,"/api/"),socketUrl:P};var A=Object(i.b)({contests:function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"ADD_CONTEST":return e=n.contests.findIndex((function(e){return e._id===r.payload.id})),t=Object(k.a)(n.contests),-1!==e?t[e]=r.payload.contest:n.contests&&t.push(r.payload.contest),j({},n,{contests:t});case"UPDATE_CONTEST":var c=j({},n.curContest);if(a=r.payload,c._id===a.id&&(c=j({},c,{},a)),e=n.contests.findIndex((function(e){return e._id===r.payload.id})),t=Object(k.a)(n.contests),-1===e)return n;var o=t[e];for(var l in r.payload)o[l]=r.payload[l];return t[e]=o,j({},n,{contests:t,curContest:c});case"DELETE_CONTEST":return e=n.contests.findIndex((function(e){return e._id===r.payload.id})),(t=Object(k.a)(n.contests)).splice(e,1),j({},n,{contests:t});case"SET_INACTIVE_CONTEST":return e=n.activeContests.findIndex((function(e){return e._id===r.id})),(t=Object(k.a)(n.activeContests)).splice(e,1),j({},n,{activeContests:t});case"SET_CONTESTS":return j({},n,{contests:r.payload.contests,activeContests:r.payload.activeContests});case"SET_CONTEST":return j({},n,{curContest:r.payload.contest});default:return n}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return h({},e,{token:t.payload});case"SET_USER":return h({},e,{user:t.payload});case"SET_AUTH":return h({},e,{user:t.payload.user,token:t.payload.token,tokenTimeout:t.payload.tokenTimeout,refreshToken:t.payload.refreshToken});case"LOGOUT":return{user:null,token:null,tokenTimeout:null,refreshToken:null};default:return e}},accessKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(console.log("Action",t.type,t.payload),t.type){case"SET_ACCESS_KEY":return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{accessKey:t.payload});default:return e}},root:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:I}}),L=Object(i.c)(A,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());a(86);var M=function(e){var t=e.message;return r.a.createElement("div",{className:"snackbar"},t)},U=(a(33),a(4)),F=a.n(U),B=a(5),K=a(1),R=a(6),Y=a(17),W=(a(88),a(89),a(8)),G=a.n(W);var H=Object(Y.i)((function(e){var t=Object(l.c)((function(e){return e.root.url})),a=Object(l.b)(),c=Object(n.useState)(""),o=Object(K.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)(""),m=Object(K.a)(u,2),d=m[0],f=m[1],v=Object(n.useState)(""),b=Object(K.a)(v,2),_=b[0],g=b[1],E=function(){var n=Object(B.a)(F.a.mark((function n(r){var c,o;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),c=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,s&&c.test(String(s).toLowerCase())){n.next=4;break}return n.abrupt("return",g("You have to use a valid email"));case 4:if(d&&!(d.length<5)){n.next=6;break}return n.abrupt("return",g("The password must have at least 5 characters"));case 6:return n.prev=6,n.next=9,G.a.post("".concat(t,"users/login"),{email:s,password:d});case 9:o=n.sent,p(o.data),a(O(o.data)),e.history.push("/"),n.next=21;break;case 15:n.prev=15,n.t0=n.catch(6),console.log(n.t0),console.log(n.t0.response),console.log(n.t0.response.data.message),n.t0.response&&n.t0.response.data&&n.t0.response.data.message?g(n.t0.response.data.message):g("An internal error has ocurred, please try again later");case 21:case"end":return n.stop()}}),n,null,[[6,15]])})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("form",{className:"loginForm",noValidate:!0,onSubmit:E},r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{id:"email",type:"email",placeholder:"Email","aria-label":"email",value:s.value,onChange:function(e){return i(e.target.value)},autoComplete:"Email",className:"loginForm__input"})),r.a.createElement("label",{htmlFor:"password"},r.a.createElement("input",{id:"password",type:"password",placeholder:"Password","aria-label":"password",value:d.value,onChange:function(e){return f(e.target.value)},autoComplete:"current-password",className:"loginForm__input"})),_?r.a.createElement("p",{className:"loginForm__errorMsg"},_):null,r.a.createElement("button",{className:"loginForm__button ".concat(_?"loginForm__button--error":""),type:"submit"},"Login"))}));a(107);var V=Object(Y.i)((function(e){var t=Object(l.c)((function(e){return e.root.url})),a=Object(l.b)(),c=Object(n.useState)(""),o=Object(K.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)(""),m=Object(K.a)(u,2),d=m[0],f=m[1],v=Object(n.useState)(""),b=Object(K.a)(v,2),_=b[0],g=b[1],E=Object(n.useState)(""),h=Object(K.a)(E,2),y=h[0],k=h[1],w=function(){var n=Object(B.a)(F.a.mark((function n(r){var c,o;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),c=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,s&&c.test(String(s).toLowerCase())){n.next=4;break}return n.abrupt("return",k("You have to use a valid email"));case 4:if(d&&!(d.length<5)){n.next=6;break}return n.abrupt("return",k("The password must have at least 5 characters"));case 6:if(_===d){n.next=8;break}return n.abrupt("return",k("Las contrase\xf1as deben coincidir"));case 8:return n.prev=8,n.next=11,G.a.post("".concat(t,"users/signup"),{email:s,password:d});case 11:o=n.sent,p(o.data),a(O(o.data)),e.history.push("/"),n.next=22;break;case 17:n.prev=17,n.t0=n.catch(8),console.log(n.t0),console.log(n.t0.response),n.t0.response&&n.t0.response.data&&n.t0.response.data.message?k(n.t0.response.data.message):k("An internal error has ocurred, please try again later");case 22:case"end":return n.stop()}}),n,null,[[8,17]])})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("form",{className:"signUpForm",noValidate:!0,onSubmit:w},r.a.createElement("input",{type:"email",id:"email",name:"email","aria-label":"email",placeholder:"Email",value:s.value,onChange:function(e){return i(e.target.value)},autoComplete:"Email",className:"signUpForm__input"}),r.a.createElement("input",{type:"password",id:"password","aria-label":"password",placeholder:"Password",value:d.value,onChange:function(e){return f(e.target.value)},autoComplete:"new-password",className:"signUpForm__input"}),r.a.createElement("input",{id:"confirmPassword",type:"password","aria-label":"ConfirmPassword",placeholder:"Confirm Password",value:_.value,onChange:function(e){return g(e.target.value)},autoComplete:"new-password",className:"signUpForm__input"}),y?r.a.createElement("p",{className:"signUpForm__errorMsg"},y):null,r.a.createElement("button",{className:"signUpForm__button ".concat(y?"signUpForm__button--error":""),type:"submit"},"SignUp"))}));var $=function(){var e=Object(n.useState)(!0),t=Object(K.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"loginPage"},r.a.createElement("div",{className:"loginPage__container"},r.a.createElement("h1",{className:"loginPage__title"},"Top"),a?r.a.createElement(H,null):r.a.createElement(V,null),r.a.createElement("p",null,a?"Are you new?":"Have you joined?"," ",r.a.createElement("span",{className:"loginPage__butSwitch",onClick:function(){c(!a)}.bind(null)},a?"Sign up":"Login")),r.a.createElement("p",null,"Lost? Check out the tutorial"," ",r.a.createElement("a",{href:"/tutorial",target:"_blank",className:"loginPage__butSwitch"},"Tutorial"))))},z=(a(108),a(109),function(e){var t=Object(n.useRef)(null),a=Object(n.useRef)(null);Object(n.useLayoutEffect)((function(){t.current&&t.current.focus()}),[t]);var c=[];return e.cancelCBK&&e.cancelText&&c.push(r.a.createElement("button",{className:"modal__button modal__button--cancel",key:1,onClick:function(){e.cancelCBK(),e.close&&e.close()}},e.cancelText)),e.okCBK&&e.okText&&c.push(r.a.createElement("button",{className:"modal__button modal__button--ok",key:0,onClick:function(){e.okCBK(),e.close&&e.close()}},e.okText)),r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal__backdrop",onClick:function(){return e.close?e.close():null}}),r.a.createElement("div",{className:"modal__content",onKeyDown:function(n){9===n.keyCode&&(n.shiftKey?document.activeElement===t.current&&(n.preventDefault(),a.current.focus()):document.activeElement===a.current&&(n.preventDefault(),t.current.focus())),"Escape"===n.key&&e.close()},tabIndex:"0"},r.a.createElement("div",{className:"modal__header"},e.close?r.a.createElement("button",{className:"modal__header__close",onClick:function(){return e.close()},ref:t},"\xd7"):null,r.a.createElement("h4",{className:"modal__header__title"},e.modalHeaderTitle)),r.a.createElement("div",{className:"modal__body"},e.modalBody),e.errorMsg?r.a.createElement("p",{className:"modal__errorMsg"},e.errorMsg):null,r.a.createElement("div",{className:"modal__footer",ref:a,tabIndex:"0"},c)))}),X=(a(110),a(111),function(){return r.a.createElement("div",{className:"lds"},r.a.createElement("div",{className:"lds-backdrop"}),r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),J=(a(53),a(31)),q=a.n(J);a(113),a(114);var Q=function(e){var t,a,n=Object(Y.g)(),c=Object(l.b)(),o=function(e){if(!e||!e[0])return"";var t=0,a=e[0].url;return e.forEach((function(e){e.likes>t&&(t=e.likes,a=e.url)})),a},s=function(e){e.private||c(D(e)),n.push("contests/".concat(e._id))},i=function(){return"1"===e.element.private||1===e.element.private};return r.a.createElement("button",{className:"search-item",onClick:function(){s(e.element)},onKeyPress:(a=function(){return s(e.element._id)},function(e){"Enter"===e.key&&a()}),style:{opacity:i()?.7:1}},i()?r.a.createElement("div",{className:"search-item__privateImg"}):null,(t=o(e.element.images),/\.(webm|ogg|mp4)$/i.test(t)?r.a.createElement("video",{src:o(e.element.images),className:"search-item__img",preload:"metadata",disablePictureInPicture:!0,controlsList:"nodownload",onClick:function(e){return e.preventDefault()}}):r.a.createElement("div",{className:"search-item__img",style:{backgroundImage:"url("+o(e.element.images)+")"}})),r.a.createElement("h2",{className:"search-item__name"},e.element.name),r.a.createElement("div",{className:"search-item__group"},r.a.createElement("div",{className:"search-item__detailText"},r.a.createElement("p",{className:"search-item__text"},"End date: ",function(e){if(!e)return e;var t=(e=new Date(e)).getHours(),a=e.getMinutes(),n=t>=12?"pm":"am";return t=(t=(t%=12)||12)<10?"0"+t:t,a=a<10?"0"+a:a,"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear()," ").concat(t,":").concat(a).concat(n)}(e.element.endDate)),r.a.createElement("p",{className:"search-item__text"},"Creator: ",e.element.username)),r.a.createElement("div",{className:"search-item__arrow"})))};var Z=function(e){var t,c=Object(n.useState)(e.contests),o=Object(K.a)(c,2),s=o[0],i=o[1],u=Object(l.c)((function(e){return e.auth.user?e.auth.user.email:""})),m=Object(n.useState)(!1),d=Object(K.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)([]),b=Object(K.a)(v,2),_=b[0],g=b[1],E=Object(n.useState)(!0),h=Object(K.a)(E,2),O=h[0],y=h[1],k=Object(n.useState)(!1),w=Object(K.a)(k,2),N=w[0],j=w[1],T=Object(n.useState)(""),C=Object(K.a)(T,2),S=C[0],x=C[1],D=Object(n.useRef)(null),P=Object(n.useCallback)((function(){f(!0);var t=e.contests.filter((function(t){var a=t.name.includes(S)||t.topic&&t.topic.includes(S)||t.username.startsWith(S),n=new Date(t.endDate);return e.hasDate&&_&&_.length>=2&&(a=a&&new Date(_[0]).getTime()<=n.getTime()&&n.getTime()<=new Date(_[1]).getTime()),O&&(a=a&&(new Date).getTime()<=n.getTime()),N&&(a=a&&t.username===u),a}));i(t)}),[O,_,S,e.contests,N,e.hasDate,u]),I=function(e){return e.map((function(e,t){return r.a.createElement(Q,{key:e._id,element:e,index:t})}))};return Object(n.useEffect)((function(){P(null,!0,null)}),[e.contests,P]),r.a.createElement("div",{className:"filter"},r.a.createElement("div",{className:"filter__criteria"},r.a.createElement("div",{className:"filter__searchBar"},r.a.createElement("img",{className:"filter__searchBar__searchIcon",src:a(115),alt:"search-icon"}),r.a.createElement("input",{className:"filter__searchBar__searchInput","aria-label":"Search",type:"text",placeholder:"Search by contest title...",onChange:function(e){return x(e.target.value)}})),e.hasDate?r.a.createElement("div",{className:"filter__actions"},r.a.createElement("div",{className:"filter__group"},r.a.createElement(q.a,{name:"date",ref:D,"aria-label":"Select date",placeholder:"Filter end dates",options:{minDate:(t=new Date,"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())),minuteIncrement:10,mode:"range",dateFormat:"d-m-Y"},value:_,onChange:function(e){g(e)},className:"filter__input filter__input--calendar"}),_&&_.length>0?r.a.createElement("p",{className:"filter__remove",onClick:function(){D.current&&D.current.flatpickr.clear()}},"X"):null),r.a.createElement("div",{className:"filter__group"},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",checked:O,onChange:function(){return y(!0)}}),"Ongoing contests"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",checked:!O,onChange:function(){return y(!1)}}),"Already finished"))):null),r.a.createElement("div",{className:"filter__tabs"},r.a.createElement("button",{className:"filter__tab filter__tab--left\n           ".concat(N?"":"filter__tab--active"),onClick:function(){return j(!1)}},"All contests"),r.a.createElement("button",{className:"filter__tab filter__tab--right\n          ".concat(N?"filter__tab--active":""),onClick:function(){return j(!0)}},"My contests")),r.a.createElement("div",{className:"filter__contests"},p||s.length>0?I(s):I(e.contests)))};a(116),a(117);var ee=function(e){var t=Object(n.useState)(null),a=Object(K.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),s=Object(K.a)(l,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){o(null),u(null);var t=function(){return e.file.type};if(t().match("video.*")&&/\.(webm|ogg|mp4)$/i.test(e.file.name)){var a=window.URL.createObjectURL(e.file);u(a)}else if(function(){var e=t();return/(jpe?g|png|gif|bmp|svg)$/i.test(e)}()){var n=new FileReader;n.onload=function(e){o(e.target.result)},n.readAsDataURL(e.file)}}),[e.file]),r.a.createElement("div",{className:"filePreview"},r.a.createElement("div",{className:"filePreview__content"},r.a.createElement("div",{className:"filePreview__file"},c?r.a.createElement("img",{src:c,className:"filePreview__image",alt:e.file.name}):i?r.a.createElement("video",{controls:!0,className:"filePreview__video",src:i+"#t=0.1",preload:"metadata",disablePictureInPicture:!0,controlsList:"nodownload"}):r.a.createElement("p",null,"Incompatible file type")),r.a.createElement("p",{className:"filePreview__remove",onClick:function(){return e.removeFile()}},"X")),r.a.createElement("p",{className:"filePreview__name"},e.file.name))};var te=function(e){return r.a.createElement("div",{className:"filePreviewList"},e.files.map((function(t,a){return r.a.createElement(ee,{file:t,key:t.name+t.lastModified,removeFile:function(){return e.removeFile(a)}})})))};function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var re=function(){var e,t=Object(n.useState)(!1),a=Object(K.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)({private:!1}),i=Object(K.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(!1),p=Object(K.a)(d,2),f=p[0],v=p[1],b=Object(n.useState)(null),_=Object(K.a)(b,2),g=_[0],E=_[1],h=Object(n.useState)([]),O=Object(K.a)(h,2),y=O[0],w=O[1],N=Object(n.useState)(!1),j=Object(K.a)(N,2),T=j[0],C=j[1],S=Object(l.c)((function(e){return e.root.url})),x=Object(l.c)((function(e){return e.auth.token})),D=Object(l.c)((function(e){return e.contests.contests}),[]),P=Object(n.useRef)(null),I=Object(Y.g)(),A=function(){var e=Object(B.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),u.name&&""!==u.name.trim()){e.next=3;break}return e.abrupt("return",E("You must specify the name of your contest"));case 3:if(u.endDate){e.next=5;break}return e.abrupt("return",E("Your contest needs an end date"));case 5:if(!(u.endDate.getTime()<(new Date).getTime())){e.next=7;break}return e.abrupt("return",E("Your contest end date can`t be before now"));case 7:if(f||y&&0!==y.length){e.next=9;break}return e.abrupt("return",E("You must upload something for contest.... I mean anything"));case 9:if(!f||void 0!==u.limit){e.next=11;break}return e.abrupt("return",E("You need to select a type of image"));case 11:if(!f||u.topic&&""!==u.topic.trim()){e.next=13;break}return e.abrupt("return",E("You must specify the topic of your contest"));case 13:return(a=new FormData).append("name",u.name),u.topic&&a.append("topic",u.topic),u.limit&&a.append("limit",u.limit),void 0!==u.private&&a.append("private",u.private?"1":"0"),a.append("endDate",u.endDate),y.forEach((function(e,t){a.append("img_".concat(t),e)})),e.next=22,L(a);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(B.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),a={headers:{Authorization:"Bearer ".concat(x),"Content-Type":"multipart/form-data"}},e.next=4,G.a.post("".concat(S,"contests"),t,a);case 4:n=e.sent,C(!1),I.push("/contests/".concat(n.data.insertedId));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=r.a.createElement("form",{className:"contestModal",onSubmit:function(e){return A(e)}},r.a.createElement("div",{className:"contestModal__row"},r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"name",className:"contestModal__inputLabel"},"Name"),r.a.createElement("input",{type:"text",name:"name","aria-label":"name",onChange:function(e){E(null),m(ne({},u,{name:e.target.value}))}})),r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"date",className:"contestModal__inputLabel"},"End Date"),r.a.createElement(q.a,{"aria-label":"Date end",name:"date",placeholder:"Contest end date",options:{minDate:(e=new Date,"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())),minuteIncrement:10,mode:"single",dateFormat:"d-m-Y"},value:u.endDate,onChange:function(e){E(null),m(ne({},u,{endDate:new Date(e)}))},className:"modal__form__input modal__form__input--calendar"}))),r.a.createElement("div",{className:"contestModal__row"},r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"images",className:"contestModal__inputLabel contestModal__inputLabel--multimedia"},"Your multimedia"),r.a.createElement(te,{files:y,removeFile:function(e){return function(e){var t=Object(k.a)(y);t.splice(e,1),w(t)}(e)}}),r.a.createElement("button",{className:"contestModal__fileContainer"},y&&0!==y.length?"Add more":"Add your multimedia",r.a.createElement("input",{type:"file",id:"multi",accept:"image/*,video/mp4,video/x-m4v,video/*",onChange:function(e){var t=y.concat(Array.from(e.target.files));w(t)},multiple:!0})),r.a.createElement("label",{htmlFor:"useRandomImg",className:"contestModal__inputLabel"},r.a.createElement("input",{name:"useRandomImg",id:"useRandomImg",type:"checkbox",checked:f,onChange:function(){console.log("llega"),m(ne({},u,{limit:f||u.limit?void 0:"1"})),v(!f)}}),"Wanna complete with random images?"),f?r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"topic",className:"contestModal__inputLabel"},"Topic",r.a.createElement("input",{type:"text",name:"topic","aria-label":"topic",onChange:function(e){E(null),m(ne({},u,{topic:e.target.value}))}})),r.a.createElement("label",{htmlFor:"limit",className:"contestModal__inputLabel"},"How many?",r.a.createElement("input",{type:"number",name:"limit",value:u.limit?parseInt(u.limit):"",min:"1",step:"1","aria-label":"limit",onChange:function(e){E(null),m(ne({},u,{limit:e.target.value}))}}))):null,r.a.createElement("label",{htmlFor:"private",className:"contestModal__inputLabel"},r.a.createElement("input",{name:"private",id:"private",type:"checkbox",checked:u.private,onChange:function(){return m(ne({},u,{private:!u.private}))}}),"Wanna make your contest private?"),u.private?r.a.createElement("p",{className:"contestModal__disclaimer"},"A new access key will be generated and displayed on the top right corner of the contest window. Give this key to those persons that you want to give access to your contest."):null)),r.a.createElement("div",{className:"contestModal__col"},g?r.a.createElement("p",{className:"modal__form__errorMsg"},g):null,r.a.createElement("button",{className:"home__button home__button--internal",type:"submit"},"+ NEW TOP IMAGE")));return r.a.createElement("div",{className:"home"},T?r.a.createElement(X,null):null,r.a.createElement("button",{className:"home__button",onClick:function(){return o(!0)},ref:P},r.a.createElement("p",{className:"home__plus"},"+"),"NEW TOP IMAGE"),c?null:r.a.createElement("button",{className:"home__fab",onClick:function(){return o(!0)},ref:P},"+"),r.a.createElement(Z,{contests:D,hasDate:!0}),c?r.a.createElement(z,{close:function(){o(!1),P.current&&P.current.focus()},modalHeaderTitle:"New Top Image",modalBody:M,okCBK:function(){},cancelCBK:function(){m({name:"",type:"",endDate:null,images:[]}),console.log("Deactivate?"),E(""),o(!1)}}):null)};var ce=Object(Y.i)((function(e){var t=Object(l.c)((function(e){return e.auth.tokenTimeout})),a=Object(l.b)();return Object(n.useEffect)((function(){var n=setTimeout((function(){f(),a(y()),e.history.push("/login")}),new Date(t).getTime()-(new Date).getTime());return function(){clearTimeout(n)}}),[e.history,t,a]),r.a.createElement("div",{className:"home__page"},r.a.createElement("div",{className:"home__bg"}),r.a.createElement(re,null))}));a(118);var oe=Object(s.wrapComponent)((function(e){var t=Object(l.c)((function(e){return e.contests.curContest})),c=Object(l.c)((function(e){return e.auth.token})),o=Object(l.c)((function(e){return e.auth.user?e.auth.user.email:""})),s=Object(l.c)((function(e){return e.root.url})),i=Object(n.useRef)(null),u=Object(n.useRef)(null),m=Object(n.useMemo)((function(){return Object(k.a)(t.images).sort((function(e,t){return(t.likes||0)+(e.dislikes||0)-(e.likes||0)-(t.dislikes||0)}))}),[t.images]),d=Object(n.useState)(m[0]),p=Object(K.a)(d,2),f=p[0],v=p[1];Object(n.useEffect)((function(){if(f&&m){var e=m.findIndex((function(e){return e.url===f.url}));v(m[e])}else v(m[0])}),[m,f]);var b=function(){var a=Object(B.a)(F.a.mark((function a(n){var r,o;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{Authorization:"Bearer ".concat(c)}},o={isDislike:n},a.prev=2,a.next=5,G.a.post("".concat(s,"contests/").concat(e.contestId,"/images/").concat(t.images.findIndex((function(e){return e.url===f.url})),"/likes"),o,r);case 5:a.next=11;break;case 7:a.prev=7,a.t0=a.catch(2),console.log(a.t0),e.createSnackbar({message:"You can\xb4t ".concat(n?"dislike":"like"," a contest when offline"),progressBar:!1,timeout:4e3});case 11:case"end":return a.stop()}}),a,null,[[2,7]])})));return function(e){return a.apply(this,arguments)}}(),_=function(e){var a=t.images.findIndex((function(t){return t.url===e}));v(t.images[a]),E(u)},g=function(){var t=Object(B.a)(F.a.mark((function t(){var a;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(c)}},t.prev=1,t.next=4,G.a.put("".concat(s,"contests/").concat(e.contestId,"/accessKey"),{},a);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),E=function e(t){var a=document.documentElement.scrollTop||document.body.scrollTop;a>t.current.offsetTop-100&&(window.requestAnimationFrame((function(){return e(t)})),window.scrollTo(0,Math.max(a-a/8,t.current.offsetTop-100)))},h=function(e){return/\.(webm|ogg|mp4)$/i.test(e)};return r.a.createElement("div",{className:"contest"},t&&1===t.private&&o===t.username?r.a.createElement("div",{className:"contest__actions"},r.a.createElement("div",{className:"contest__action"},r.a.createElement("button",{className:"contest__button",onClick:function(){return e.createSnackbar({message:"Access key copied to clipboard",progressBar:!1,timeout:4e3}),i.current.select(),document.execCommand("copy"),i.current.setSelectionRange(0,0),void i.current.blur()}},r.a.createElement("img",{src:a(119),alt:"Copy AccessKey button"})),r.a.createElement("p",{className:"contest__label"},"Copy access key")),r.a.createElement("textarea",{className:"contest__accesskey",readOnly:!0,ref:i,value:t.accessKey?t.accessKey:""}),r.a.createElement("div",{className:"contest__action"},r.a.createElement("button",{className:"contest__button",onClick:function(){return g()}},r.a.createElement("img",{src:a(120),alt:"Renew AccessKey button"})),r.a.createElement("p",{className:"contest__label"},"Renew access key"))):null,r.a.createElement("h2",{className:"contest__name"},t?t.name:null),r.a.createElement("div",{className:"contest__header"},r.a.createElement("p",null,"Topic: ",t.topic),r.a.createElement("p",null,"End Date: ",function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}(t.endDate))),r.a.createElement("div",{className:"contest__main"},r.a.createElement("div",{className:"contest__list"},r.a.createElement("h2",{className:"contest__listName"},"Contest images"),m.map((function(e){return r.a.createElement("div",{className:"contest__preview",key:e.url},h(e.url)?r.a.createElement("video",{src:e.url,className:"contest__card",preload:"metadata",disablePictureInPicture:!0,controlsList:"nodownload",onClick:function(t){t.preventDefault(),_(e.url)}}):r.a.createElement("button",{className:"contest__card",style:{backgroundImage:"url("+e.url+")"},"aria-label":"button",onClick:function(){return _(e.url)}}),r.a.createElement("p",{className:"contest__preview--likes"},"Score: ",e.likes-e.dislikes))}))),f?r.a.createElement("div",{className:"contest__featured",ref:u},h(f.url)?r.a.createElement("video",{src:f.url,className:"contest__card contest__card--main",preload:"metadata",disablePictureInPicture:!0,controlsList:"nodownload",controls:!0}):r.a.createElement("div",{className:"contest__card contest__card--main",style:{backgroundImage:"url("+f.url+")"}}),r.a.createElement("div",{className:"contest__like"},r.a.createElement("div",{className:"contest__likeButtons"},r.a.createElement("button",{className:"contest__icon",alt:"likes for item","aria-label":"like",tabIndex:"0",style:{backgroundImage:"url("+a(121)("./like".concat(-1!==(f.likedBy||[]).findIndex((function(e){return e===o}))?"":"U",".svg"))+")"},onClick:function(){return b(!1)}}),r.a.createElement("p",{className:"contest__numLikes"},f.likes),r.a.createElement("button",{className:"contest__icon","aria-label":"dislike",alt:"dislikes for item",style:{backgroundImage:"url("+a(124)("./dislike".concat(-1!==(f.dislikedBy||[]).findIndex((function(e){return e===o}))?"":"U",".svg"))+")"},onClick:function(){return b(!0)}}),r.a.createElement("p",{className:"contest__numLikes"},f.dislikes)),r.a.createElement("p",{className:"contest__numLikes"},"Total score: ",f.likes-f.dislikes))):null))}));a(127);var le=Object(Y.i)((function(){var e=Object(l.c)((function(e){return e.root.url})),t=Object(l.c)((function(e){return e.contests.curContest})),a=Object(l.c)((function(e){return e.auth.token})),c=Object(l.c)((function(e){return e.accessKey.accessKey})),o=Object(Y.h)().id,s=Object(Y.g)(),i=Object(n.useState)(!1),u=Object(K.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(!1),v=Object(K.a)(f,2),b=v[0],g=v[1],E=Object(n.useState)(),h=Object(K.a)(E,2),O=h[0],y=h[1],k=Object(n.useState)(!1),w=Object(K.a)(k,2),N=w[0],j=w[1],T=Object(n.useState)(null),C=Object(K.a)(T,2),S=C[0],x=C[1],P=Object(l.b)(),I=(t||{})._id,A=(t||{}).private;Object(n.useEffect)((function(){function t(){return(t=Object(B.a)(F.a.mark((function t(){var n,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(!0),n={headers:{Authorization:"Bearer ".concat(a),"access-key":c}},t.next=5,G.a.get("".concat(e,"contests/").concat(o),n);case 5:r=t.sent,P(D(r.data)),t.next=17;break;case 9:if(t.prev=9,t.t0=t.catch(0),0!==A||I!==o){t.next=14;break}return j(!1),t.abrupt("return");case 14:t.t0.response&&403!==t.t0.response.status&&g(!0),t.t0.message.includes("Network")&&g(!0),p(!0);case 17:return t.prev=17,j(!1),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,9,17,20]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[o,e,P,a,c,I,A]);var L=function(){var t=Object(B.a)(F.a.mark((function t(){var n,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(!0),n={headers:{Authorization:"Bearer ".concat(a),"access-key":O}},t.next=5,G.a.get("".concat(e,"contests/").concat(o),n);case 5:r=t.sent,p(!1),x(null),d(O),P(_(O)),P(D(r.data)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),t.t0.response&&403===t.t0.response.status?x(t.t0.response.data.message):x("Internal error, please try again later");case 16:return t.prev=16,j(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})));return function(){return t.apply(this,arguments)}}(),M=r.a.createElement("form",{className:"contestModal"},r.a.createElement("input",{type:"text",name:"accessKey","aria-label":"accessKey",onChange:function(e){y(e.target.value)}}));return r.a.createElement("div",{className:"contestPage"},N?r.a.createElement("div",{className:"contestPage__loader"},r.a.createElement(X,null)):null,m?r.a.createElement(z,{modalHeaderTitle:b?"You can\xb4t access private rooms offline :(":"Please enter your access key",modalBody:b?null:M,okCBK:b?null:L,okText:"OK",cancelCBK:function(){s.goBack()},cancelText:"Go Back",errorMsg:S}):null,r.a.createElement("div",{className:"contestPage__background"}),t&&!m?r.a.createElement(oe,{contestId:o}):null)})),se=(a(128),[{title:"Sign up",description:"Sign up to TopImage to create contests or see previous contests created by others"},{title:"Create a contest",description:"Click on the New Top Image button to create your own contest"},{title:"Mandatory contest setup",description:"Choose a name and end date for your contest."},{title:"Contest options",description:"You then have three more options: Upload your own multimedia with the 'Add multimedia button', complete your contest with random images based on a topic and quantity, and make your contest private (only you can give access) or public. Finally click on the 'Top Image' button to start the contest"},{title:"View contests",description:"See all the current running contests in the grid below. Also go back and forth between all the contests and the ones you created with the purple tabs on top."},{title:"Search",description:"Use the search bar to filter contests by name. You can also choose a range of dates and whether the contest has ended or not"},{title:"Go into a contest",description:"Click on a contest preview to go into its details"},{title:"Select an image",description:"Select an image you like from the list on the left to see it bigger and be able to rate it"},{title:"Rate an image",description:"Use the like and dislike options below to rate the image"},{title:"Share your private contest",description:"If your contest is private, you can copy the unique code on the top right corner to send it to your friends so that they can rate it (first button) or create a new code (second button)"}]);var ie=Object(Y.i)((function(e){return r.a.createElement("div",{className:"tutorial"},r.a.createElement("h1",{className:"tutorial__title"},"Tutorial"),r.a.createElement("button",{className:"tutorial__button",onClick:function(){return e.history.push("/")}},"Go to main"),r.a.createElement("h2",null,"What is this all about?"),r.a.createElement("p",null,"Top Image allows you to create contests. Each contest hold certain images which people can vote, to select the best one ",r.a.createElement("br",null),r.a.createElement("br",null),"You can create public or private contests, and even complete with random images if you want to"),r.a.createElement("ul",{id:"menu"},se.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("a",{href:"#item".concat(t)},e.title))}))),r.a.createElement("div",{className:"tutorial__list"},se.map((function(e,t){return r.a.createElement("div",{className:"tutorial__item",key:t,id:"item".concat(t)},r.a.createElement("hr",null),r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description),r.a.createElement("img",{src:a(129)("./tuto"+(t+1)+".png"),alt:"Tutorial step"}),r.a.createElement("a",{href:"#menu",className:"tutorial__backToMenu"},"Back to menu"))}))))}));a(141);var ue=function(){var e=Object(n.useState)(!1),t=Object(K.a)(e,2),c=t[0],o=t[1],s=Object(n.useState)(!1),i=Object(K.a)(s,2),u=i[0],m=i[1],d=Object(l.b)(),p=function(){f(),d(y())};return r.a.createElement("nav",{className:"nav ".concat(u?"nav--active":"")},r.a.createElement("div",{className:"nav__header"},r.a.createElement("h1",{className:"nav__title"},r.a.createElement(R.b,{className:"nav__logo",to:"/"},"TOP IMAGE",r.a.createElement("img",{className:"nav__img",src:a(142),alt:"App logo. A lightbulb inside an icon"}))),r.a.createElement("button",{className:"nav__toggle",onClick:function(){m(!u)}},r.a.createElement("img",{src:a(143),alt:"Toggler for menu when on mobile"}))),r.a.createElement("div",{className:"".concat(u?"nav__actions--active":"nav__actions")},r.a.createElement("div",{className:"nav__action"},r.a.createElement(R.c,{exact:!0,className:"nav__link",activeClassName:"nav__link--active",to:"/"},"Home")),r.a.createElement("div",{className:"nav__user"},r.a.createElement(R.c,{exact:!0,className:"nav__link",activeClassName:"nav__link--active",to:"/tutorial"}," ",r.a.createElement("img",{className:"nav__userIcon",src:a(144),alt:"help"})),r.a.createElement("img",{className:"nav__userIcon",src:a(145),alt:"user",onClick:function(){return o(!c)}})),r.a.createElement("div",{className:"nav__user--responsive"},r.a.createElement("div",{className:"nav__action"},r.a.createElement(R.c,{exact:!0,className:"nav__link",activeClassName:"nav__link--active",to:"/tutorial"},"Tutorial")),r.a.createElement("div",{className:"nav__action"},r.a.createElement("button",{onClick:p,className:"nav__mockLink"},"Log Out")))),c?r.a.createElement("div",{className:"nav__modal"},r.a.createElement("p",{className:"nav__modalOption",onClick:p},"Cerrar sesi\xf3n")):null)};var me=function(){var e=Object(l.c)((function(e){return e.auth.token}));return r.a.createElement(R.a,null,e?r.a.createElement(ue,null):null,r.a.createElement(Y.d,null,r.a.createElement(Y.b,{path:"/tutorial",component:ie}),r.a.createElement(Y.b,{path:"/",exact:!0,render:function(){return e?r.a.createElement(ce,null):r.a.createElement(Y.a,{to:"/login"})}}),r.a.createElement(Y.b,{path:"/login",render:function(){return e?r.a.createElement(Y.a,{to:"/"}):r.a.createElement($,null)}}),r.a.createElement(Y.b,{path:"/contests/:id",render:function(){return e?r.a.createElement(le,null):r.a.createElement(Y.a,{to:"/login"})}}),r.a.createElement(Y.b,{path:"*",render:function(){return r.a.createElement(Y.a,{to:"/login"})}})))},de=a(72),pe=a.n(de),fe=a(24);var ve=function(){var e=Object(n.useState)(window.navigator.onLine),t=Object(K.a)(e,2),a=t[0],c=t[1],o=function(){c(window.navigator.onLine),window.navigator.onLine&&m(null)},s=Object(n.useState)(null),i=Object(K.a)(s,2),u=i[0],m=i[1],d=Object(l.c)((function(e){return e.root.url})),p=Object(l.c)((function(e){return e.root.socketUrl})),f=Object(l.c)((function(e){return e.auth.token})),v=Object(l.b)();return Object(n.useEffect)((function(){function e(){return(e=Object(B.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.a.get("".concat(d,"contests"),{headers:{Authorization:"Bearer ".concat(f)}});case 3:t=e.sent,v(x(t.data)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t=function(){if(a){var e=pe()(p);return e.on(fe.CONTEST_EVENT,(function(e){switch(e.action){case fe.ACTION_INSERT:return v(T(e.payload));case fe.ACTION_DELETE:return v(S(e.payload));case fe.ACTION_UPDATE:return v(C(e.payload));default:return}})),e}}();return function(e){window.addEventListener("offline",(function(){e.disconnect(),o()})),window.addEventListener("online",o)}(t),function(){window.removeEventListener("offline",(function(){t&&t.disconnect(),o()})),window.removeEventListener("online",o)}}),[v,p,f,d,a,u]),r.a.createElement(me,null)};var be=function(){return r.a.createElement(l.a,{store:L},r.a.createElement(s.SnackbarProvider,{component:M},r.a.createElement(ve,null)))},_e=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ge(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(be,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/sw.js");_e?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ge(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ge(t,e)}))}}()}]),[[75,1,2]]]);
//# sourceMappingURL=main.aaa2fa9f.chunk.js.map