(window["webpackJsonptop-image"]=window["webpackJsonptop-image"]||[]).push([[0],Array(21).concat([function(e,t){t.CONTEST_EVENT="contests",t.CONTEST_DETAIL_EVENT="contest",t.ACTION_INSERT="action_insert",t.ACTION_UPDATE="action_update",t.ACTION_DELETE="action_delete"},,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5cc607db.svg"},,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(162)},,,,,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/magnifying-glass.adf7b08c.svg"},function(e,t,n){},function(e,t,n){var a={"./like.svg":110,"./likeU.svg":111};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=109},function(e,t,n){e.exports=n.p+"static/media/like.a467c6a0.svg"},function(e,t,n){e.exports=n.p+"static/media/likeU.08723e07.svg"},function(e,t,n){var a={"./dislike.svg":113,"./dislikeU.svg":114};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=112},function(e,t,n){e.exports=n.p+"static/media/dislike.3f1544fc.svg"},function(e,t,n){e.exports=n.p+"static/media/dislikeU.921dfa34.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){var a={"./tuto1.png":118,"./tuto2.png":119,"./tuto3.png":120,"./tuto4.png":121,"./tuto5.png":122,"./tuto6.png":123,"./tuto7.png":124,"./tuto8.png":125};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=117},function(e,t,n){e.exports=n.p+"static/media/tuto1.d1ae3bc7.png"},function(e,t,n){e.exports=n.p+"static/media/tuto2.1e3ed942.png"},function(e,t,n){e.exports=n.p+"static/media/tuto3.b105dcc4.png"},function(e,t,n){e.exports=n.p+"static/media/tuto4.e2c8a7aa.png"},function(e,t,n){e.exports=n.p+"static/media/tuto5.4d22a315.png"},function(e,t,n){e.exports=n.p+"static/media/tuto6.45d73162.png"},function(e,t,n){e.exports=n.p+"static/media/tuto7.d8cace18.png"},function(e,t,n){e.exports=n.p+"static/media/tuto8.aeb9cc60.png"},function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/menu.aa9d6fc1.svg"},function(e,t,n){e.exports=n.p+"static/media/help.840adbfd.svg"},function(e,t,n){e.exports=n.p+"static/media/person.0c32117b.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),o=n.n(c),l=(n(75),n(1)),s=n(20),i=n(18),u={token:null,tokenTimeout:null,user:null,refreshToken:null},m=function(e){var t=e.tokenTimeout,n=new Date((new Date).getTime()+60*t*60*1e3);for(var a in e.tokenTimeout=n,e)localStorage.setItem(a,JSON.stringify(e[a]))},d=function(){for(var e in u)localStorage.removeItem(e)},p=function(){if(u.token=localStorage.getItem("token"),u.token){for(var e in u)try{u[e]=JSON.parse(localStorage.getItem(e))}catch(n){console.error(n)}if(new Date(u.tokenTimeout)<new Date)for(var t in d(),u)u[t]=null}return u}();function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){return{type:"SET_AUTH",payload:e}},g=function(){return{type:"LOGOUT"}},v=n(16),E={contests:[],curContest:null,activeContests:[]};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){return{type:"ADD_CONTEST",payload:{contest:e}}},y=function(e){return{type:"UPDATE_CONTEST",payload:e}},k=function(e){return{type:"DELETE_CONTEST",payload:{id:e}}},j=function(e){var t=new Date;return{type:"SET_CONTESTS",payload:{contests:e,activeContests:e.filter((function(e){return new Date(e.endDate).getTime()>t.getTime()}))}}},w=function(e){return{type:"SET_CONTEST",payload:{contest:e}}},T="https://top-image.herokuapp.com",C={url:"".concat(T,"/api/"),socketUrl:T};var D=Object(s.b)({contests:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_CONTEST":return e=n.contests.findIndex((function(e){return e._id===a.payload.id})),t=Object(v.a)(n.contests),-1!==e?t[e]=a.payload.contest:n.contests&&t.push(a.payload.contest),O({},n,{contests:t});case"UPDATE_CONTEST":var r=O({},n.curContest);if(r._id===a.payload.id&&(r.images=a.payload.images),e=n.contests.findIndex((function(e){return e._id===a.payload.id})),t=Object(v.a)(n.contests),-1===e)return n;var c=t[e];for(var o in a.payload)c[o]=a.payload[o];return t[e]=c,O({},n,{contests:t,curContest:r});case"DELETE_CONTEST":return e=n.contests.findIndex((function(e){return e._id===a.payload.id})),(t=Object(v.a)(n.contests)).splice(e,1),O({},n,{contests:t});case"SET_INACTIVE_CONTEST":return e=n.activeContests.findIndex((function(e){return e._id===a.id})),(t=Object(v.a)(n.activeContests)).splice(e,1),O({},n,{activeContests:t});case"SET_CONTESTS":return O({},n,{contests:a.payload.contests,activeContests:a.payload.activeContests});case"SET_CONTEST":return O({},n,{curContest:a.payload.contest});default:return n}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return b({},e,{token:t.payload});case"SET_USER":return b({},e,{user:t.payload});case"SET_AUTH":return b({},e,{user:t.payload.user,token:t.payload.token,tokenTimeout:t.payload.tokenTimeout,refreshToken:t.payload.refreshToken});case"LOGOUT":return{user:null,token:null,tokenTimeout:null,refreshToken:null};default:return e}},root:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:C}}),S=Object(s.c)(D,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),x=(n(32),n(4)),I=n.n(x),P=n(8),U=n(7),M=n(15),F=n(2),L=(n(81),n(82),n(11)),A=n.n(L);var B=Object(M.i)((function(e){var t=Object(l.c)((function(e){return e.root.url})),n=Object(l.b)(),c=Object(a.useState)(""),o=Object(F.a)(c,2),s=o[0],i=o[1],u=Object(a.useState)(""),d=Object(F.a)(u,2),p=d[0],f=d[1],b=Object(a.useState)(""),g=Object(F.a)(b,2),v=g[0],E=g[1],h=function(){var a=Object(P.a)(I.a.mark((function a(r){var c,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),c=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,s&&c.test(String(s).toLowerCase())){a.next=4;break}return a.abrupt("return",E("You have to use a valid email"));case 4:if(p&&!(p.length<5)){a.next=6;break}return a.abrupt("return",E("The password must have at least 5 characters"));case 6:return a.prev=6,a.next=9,A.a.post("".concat(t,"users/login"),{email:s,password:p});case 9:o=a.sent,m(o.data),n(_(o.data)),e.history.push("/"),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(6),console.log(a.t0),console.log(a.t0.response);case 19:case"end":return a.stop()}}),a,null,[[6,15]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("form",{className:"loginForm",noValidate:!0,onSubmit:h},r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{id:"email",type:"email",placeholder:"Email","aria-label":"email",value:s.value,onChange:function(e){return i(e.target.value)},autoComplete:"Email",className:"loginForm__input"})),r.a.createElement("label",{htmlFor:"password"},r.a.createElement("input",{id:"password",type:"password",placeholder:"Password","aria-label":"password",value:p.value,onChange:function(e){return f(e.target.value)},autoComplete:"current-password",className:"loginForm__input"})),v?r.a.createElement("p",{className:"loginForm__errorMsg"},v):null,r.a.createElement("button",{className:"loginForm__button ".concat(v?"loginForm__button--error":""),type:"submit"},"Login"))}));n(100);var Y=Object(M.i)((function(e){var t=Object(l.c)((function(e){return e.root.url})),n=Object(l.b)(),c=Object(a.useState)(""),o=Object(F.a)(c,2),s=o[0],i=o[1],u=Object(a.useState)(""),d=Object(F.a)(u,2),p=d[0],f=d[1],b=Object(a.useState)(""),g=Object(F.a)(b,2),v=g[0],E=g[1],h=Object(a.useState)(""),O=Object(F.a)(h,2),N=O[0],y=O[1],k=function(){var a=Object(P.a)(I.a.mark((function a(r){var c,o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),c=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,s&&c.test(String(s).toLowerCase())){a.next=4;break}return a.abrupt("return",y("You have to use a valid email"));case 4:if(p&&!(p.length<5)){a.next=6;break}return a.abrupt("return",y("The password must have at least 5 characters"));case 6:if(v===p){a.next=8;break}return a.abrupt("return",y("Las contrase\xf1as deben coincidir"));case 8:return a.prev=8,a.next=11,A.a.post("".concat(t,"users/signup"),{email:s,password:p});case 11:o=a.sent,m(o.data),n(_(o.data)),e.history.push("/"),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(8),console.log(a.t0),console.log(a.t0.response);case 21:case"end":return a.stop()}}),a,null,[[8,17]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("form",{className:"signUpForm",noValidate:!0,onSubmit:k},r.a.createElement("input",{type:"email",id:"email",name:"email","aria-label":"email",placeholder:"Email",value:s.value,onChange:function(e){return i(e.target.value)},autoComplete:"Email",className:"signUpForm__input"}),r.a.createElement("input",{type:"password",id:"password","aria-label":"password",placeholder:"Password",value:p.value,onChange:function(e){return f(e.target.value)},autoComplete:"new-password",className:"signUpForm__input"}),r.a.createElement("input",{id:"confirmPassword",type:"password","aria-label":"ConfirmPassword",placeholder:"Confirm Password",value:v.value,onChange:function(e){return E(e.target.value)},autoComplete:"new-password",className:"signUpForm__input"}),N?r.a.createElement("p",{className:"signUpForm__errorMsg"},N):null,r.a.createElement("button",{className:"signUpForm__button ".concat(N?"signUpForm__button--error":""),type:"submit"},"SignUp"))}));var R=function(){var e=Object(a.useState)(!0),t=Object(F.a)(e,2),n=t[0],c=t[1];return r.a.createElement("div",{className:"loginPage"},r.a.createElement("div",{className:"loginPage__container"},r.a.createElement("h1",{className:"loginPage__title"},"Top"),n?r.a.createElement(B,null):r.a.createElement(Y,null),r.a.createElement("p",null,n?"Are you new?":"Have you joined?"," ",r.a.createElement("span",{className:"loginPage__butSwitch",onClick:function(){c(!n)}.bind(null)},n?"Sign up":"Login")),r.a.createElement("p",null,"Lost? Check out the tutorial"," ",r.a.createElement("a",{href:"/tutorial",target:"_blank",className:"loginPage__butSwitch"},"Tutorial"))))},K=(n(101),n(102),function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null);Object(a.useLayoutEffect)((function(){t.current&&t.current.focus()}),[t]);var c=[];return e.cancelCBK&&e.cancelText&&c.push(r.a.createElement("button",{className:"modal__button modal__button--cancel",key:1,onClick:function(){e.cancelCBK(),e.close()}},e.cancelText)),e.okCBK&&e.okText&&c.push(r.a.createElement("button",{className:"modal__button modal__button--ok",key:0,onClick:function(){e.okCBK(),e.close()}},e.okText)),r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal__backdrop",onClick:function(){return e.close()}}),r.a.createElement("div",{className:"modal__content",onKeyDown:function(a){9===a.keyCode&&(a.shiftKey?document.activeElement===t.current&&(a.preventDefault(),n.current.focus()):document.activeElement===n.current&&(a.preventDefault(),t.current.focus())),"Escape"===a.key&&e.close()},tabIndex:"0"},r.a.createElement("div",{className:"modal__header"},r.a.createElement("button",{className:"modal__header__close",onClick:function(){return e.close()},ref:t},"\xd7"),r.a.createElement("h4",{className:"modal__header__title"},e.modalHeaderTitle)),r.a.createElement("div",{className:"modal__body"},e.modalBody),r.a.createElement("div",{className:"modal__footer",ref:n,tabIndex:"0"},c)))}),V=(n(103),n(50),function(){return r.a.createElement("div",{className:"lds"},r.a.createElement("div",{className:"lds-backdrop"}),r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),G=(n(51),n(30)),H=n.n(G);n(105),n(106);var W=function(e){var t,n=Object(M.g)(),a=function(e){n.push("contests/".concat(e))};return r.a.createElement("div",{className:"search-item",onClick:function(){a(e.element._id)},onKeyPress:(t=function(){return a(e.element._id)},function(e){"Enter"===e.key&&t()}),role:"button"},r.a.createElement("div",{className:"search-item__container"},r.a.createElement("span",{className:"search-item__num"},"X",e.element.images.length)),r.a.createElement("img",{className:"search-item__img",src:function(e){var t=0,n=e[0].url;return e.forEach((function(e){e.likes>t&&(t=e.likes,n=e.url)})),n}(e.element.images),alt:"Best item of the contest so far"}),r.a.createElement("h2",{className:"search-item__date"},function(e){if(!e)return e;var t=(e=new Date(e)).getHours(),n=e.getMinutes(),a=t>=12?"pm":"am";return t=(t=(t%=12)||12)<10?"0"+t:t,n=n<10?"0"+n:n,"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear()," ").concat(t,":").concat(n," ").concat(a)}(e.element.endDate)),r.a.createElement("div",{className:"search-item__group"},r.a.createElement("p",{className:"search-item__text"},e.element.username," ",e.element.name),r.a.createElement("p",{className:"search-item__arrow"},"\u25ba")))};var X=function(e){var t,c=Object(a.useState)(e.contests),o=Object(F.a)(c,2),l=o[0],s=o[1],i=Object(a.useState)(!1),u=Object(F.a)(i,2),m=u[0],d=u[1],p=Object(a.useState)([]),f=Object(F.a)(p,2),b=f[0],_=f[1],g=Object(a.useState)(!0),v=Object(F.a)(g,2),E=v[0],h=v[1],O=Object(a.useState)(""),N=Object(F.a)(O,2),y=N[0],k=N[1],j=Object(a.useCallback)((function(t,n,a){d(!0);var r=t&&null!==t?t.target.value:y;a=a||b,n=void 0!==n&&null!==n?n:E;var c=e.contests.filter((function(t){var c=t.name.includes(r)||t.topic.includes(r)||t.username.startsWith(r),o=new Date(t.endDate);return e.hasDate&&a&&a.length>=2&&(c=c&&new Date(a[0]).getTime()<=o.getTime()&&o.getTime()<=new Date(a[1]).getTime()),n&&(c=c&&(new Date).getTime()<=o.getTime()),c}));h(n),_(a),k(r),s(c)}),[E,b,y,e.contests,e.hasDate]),w=function(e){return e.map((function(e,t){return r.a.createElement(W,{key:e._id,element:e,index:t})}))};return Object(a.useEffect)((function(){j(null,!0,null)}),[e.contests,j]),r.a.createElement("div",{className:"filter"},r.a.createElement("div",{className:"filter__criteria"},r.a.createElement("div",{className:"filter__searchBar"},r.a.createElement("img",{className:"filter__searchBar__searchIcon",src:n(107),alt:"search-icon"}),r.a.createElement("input",{className:"filter__searchBar__searchInput","aria-label":"Search",type:"text",placeholder:"Search...",onChange:j})),e.hasDate?r.a.createElement("div",{className:"filter__actions"},r.a.createElement(H.a,{"data-enable-time":!0,name:"date","aria-label":"Select date",placeholder:"Filter dates",options:{minDate:(t=new Date,"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())),minuteIncrement:10,mode:"range"},value:b,onChange:function(e){j(null,null,e)},className:"modal__form__input modal__form__input--calendar"}),r.a.createElement("label",null,"Ongoing",r.a.createElement("input",{type:"checkbox",checked:E,onChange:function(){j(null,!E,null)}}))):null),r.a.createElement("div",{className:"filter__contests"},m||l.length>0?w(l):w(e.contests)))};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=function(){var e,t=Object(a.useState)(!1),c=Object(F.a)(t,2),o=c[0],s=c[1],i=Object(a.useState)({}),u=Object(F.a)(i,2),m=u[0],d=u[1],p=Object(a.useState)(""),f=Object(F.a)(p,2),b=f[0],_=f[1],g=Object(a.useState)(void 0),v=Object(F.a)(g,2),E=v[0],h=v[1],O=Object(a.useState)([]),N=Object(F.a)(O,2),y=N[0],k=N[1],j=Object(a.useState)(!1),w=Object(F.a)(j,2),T=w[0],C=w[1],D=Object(l.c)((function(e){return e.root.url})),S=Object(l.c)((function(e){return e.auth.token})),x=Object(l.c)((function(e){return e.contests.contests}),[]),U=Object(a.useRef)(null),L=Object(M.g)(),B=function(){var e=Object(P.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m.name&&""!==m.name.trim()){e.next=3;break}return e.abrupt("return",_("You must specify the name of your contest"));case 3:if(m.topic&&""!==m.topic.trim()){e.next=5;break}return e.abrupt("return",_("You must specify the topic of your contest"));case 5:if(m.endDate){e.next=7;break}return e.abrupt("return",_("Your contest needs an end date"));case 7:if(!(m.endDate.getTime()<(new Date).getTime())){e.next=9;break}return e.abrupt("return",_("Your contest end date can`t be before now"));case 9:if(void 0!==E){e.next=11;break}return e.abrupt("return",_("You need to select a type of image"));case 11:if(!E||!(!y||y.length<2||y.length>4)){e.next=13;break}return e.abrupt("return",_("You must upload between 2 and 4 images for the contest"));case 13:return(n=new FormData).append("name",m.name),n.append("topic",m.topic),n.append("endDate",m.endDate),y.forEach((function(e,t){n.append("img_".concat(t),e)})),console.log("FORM",n),e.next=21,Y(n);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(P.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),n={headers:{Authorization:"Bearer ".concat(S),"Content-Type":"multipart/form-data"}},e.next=4,A.a.post("".concat(D,"contests"),t,n);case 4:a=e.sent,C(!1),console.log(a.data),L.push("/contests/".concat(a.data.insertedId));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=r.a.createElement("form",{className:"contestModal",onSubmit:function(e){return B(e)}},r.a.createElement("div",{className:"contestModal__row"},r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"name",className:"contestModal__inputLabel"},"Name"),r.a.createElement("input",{type:"text",name:"name","aria-label":"name",onChange:function(e){_(null),d(z({},m,{name:e.target.value}))}})),r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"date",className:"contestModal__inputLabel"},"End Date"),r.a.createElement(H.a,{"data-enable-time":!0,"aria-label":"Date end",name:"date",placeholder:"Contest end date",options:{minDate:(e=new Date,"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())),minuteIncrement:30},value:m.endDate,onChange:function(e){_(null),d(z({},m,{endDate:new Date(e)}))},className:"modal__form__input modal__form__input--calendar"}))),r.a.createElement("div",{className:"contestModal__row"},r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"topic",className:"contestModal__inputLabel"},"Topic"),r.a.createElement("input",{type:"text",name:"topic","aria-label":"topic",onChange:function(e){_(null),d(z({},m,{topic:e.target.value}))}})),r.a.createElement("div",{className:"contestModal__col"},r.a.createElement("label",{htmlFor:"images",className:"contestModal__inputLabel"},"Images"),r.a.createElement("div",{name:"images",className:"contestModal__row"},r.a.createElement("label",{className:"contestModal__inputLabel contestModal__inputLabel--option"},r.a.createElement("input",{type:"radio",value:"own",checked:!0===E,onChange:function(){h(!0)}}),"Own"),r.a.createElement("label",{className:"contestModal__inputLabel contestModal__inputLabel--option"},r.a.createElement("input",{type:"radio",value:"random",checked:!1===E,onChange:function(){h(!1),_(null),d(z({},m,{images:[]}))}}),"Random")),r.a.createElement("br",null),E?r.a.createElement("button",{className:"contestModal__fileContainer"},y&&0!==y.length?"".concat(y.length," images waiting to be send"):"Upload your images",r.a.createElement("input",{type:"file",id:"multi",accept:"image/*",onChange:function(e){var t=Array.from(e.target.files);k(t)},multiple:!0})):null)),r.a.createElement("div",{className:"contestModal__col"},b?r.a.createElement("p",{className:"modal__form__errorMsg"},b):null,r.a.createElement("button",{className:"home__button",type:"submit"},r.a.createElement("img",{className:"home__img",src:n(52),alt:"App logo. A lightbulb inside an icon"}),"NEW TOP IMAGE")));return r.a.createElement("div",{className:"home"},T?r.a.createElement(V,null):null,r.a.createElement("button",{className:"home__button",onClick:function(){return s(!0)},ref:U},r.a.createElement("img",{className:"home__img",src:n(52),alt:"App logo. A lightbulb inside an icon"}),"NEW TOP IMAGE"),r.a.createElement(X,{contests:x,hasDate:!0}),o?r.a.createElement(K,{close:function(){s(!1),U.current.focus()},modalHeaderTitle:"New Top Image",modalBody:R,okCBK:function(){},cancelCBK:function(){d({name:"",type:"",endDate:null,images:[]}),console.log("Deactivate?"),_(""),s(!1)}}):null)};var q=Object(M.i)((function(e){var t=Object(l.c)((function(e){return e.auth.tokenTimeout})),n=Object(l.b)();return Object(a.useEffect)((function(){var a=setTimeout((function(){d(),n(g()),e.history.push("/login")}),new Date(t).getTime()-(new Date).getTime());return function(){clearTimeout(a)}}),[e.history,t,n]),r.a.createElement("div",{className:"home__page"},r.a.createElement("div",{className:"home__bg"}),r.a.createElement($,null))}));n(108);var Q=function(e){var t=Object(l.c)((function(e){return e.contests.curContest})),c=Object(l.c)((function(e){return e.auth.token})),o=Object(l.c)((function(e){return e.auth.user?e.auth.user.email:""})),s=Object(l.c)((function(e){return e.root.url})),i=Object(a.useMemo)((function(){return Object(v.a)(t.images).sort((function(e,t){return(t.likes||0)+(e.dislikes||0)-(e.likes||0)-(t.dislikes||0)}))}),[t.images]),u=Object(a.useState)(i[0]),m=Object(F.a)(u,2),d=m[0],p=m[1];Object(a.useEffect)((function(){if(d&&i){var e=i.findIndex((function(e){return e.url===d.url}));p(i[e])}else p(i[0])}),[i,d]);var f=function(){var n=Object(P.a)(I.a.mark((function n(a){var r,o;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{Authorization:"Bearer ".concat(c)}},o={isDislike:a},n.prev=2,n.next=5,A.a.post("".concat(s,"contests/").concat(e.contestId,"/images/").concat(t.images.findIndex((function(e){return e.url===d.url})),"/likes"),o,r);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("div",{className:"contest"},r.a.createElement("h2",{className:"contest__name"},t?t.name:null),r.a.createElement("div",{className:"contest__header"},r.a.createElement("p",null,"Topic: ",t.topic),r.a.createElement("p",null,"End Date: ",function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}(t.endDate))),r.a.createElement("div",{className:"contest__main"},r.a.createElement("div",{className:"contest__list"},i.map((function(e){return r.a.createElement("div",{className:"contest__preview",key:e.url},r.a.createElement("button",{className:"contest__card",style:{backgroundImage:"url("+e.url+")"},"aria-label":"button",onClick:function(){return function(e){var n=t.images.findIndex((function(t){return t.url===e}));p(t.images[n])}(e.url)}}),r.a.createElement("p",{className:"contest__preview--likes"},"Score: ",e.likes-e.dislikes))}))),d?r.a.createElement("div",{className:"contest__featured"},r.a.createElement("div",{className:"contest__card contest__card--main",style:{backgroundImage:"url("+d.url+")"}}),r.a.createElement("div",{className:"contest__like"},r.a.createElement("button",{className:"contest__icon",alt:"likes for item",tabIndex:"0",style:{backgroundImage:"url("+n(109)("./like".concat(-1!==(d.likedBy||[]).findIndex((function(e){return e===o}))?"":"U",".svg"))+")"},onClick:function(){return f(!1)}}),r.a.createElement("button",{className:"contest__icon",alt:"dislikes for item",style:{backgroundImage:"url("+n(112)("./dislike".concat(-1!==(d.dislikedBy||[]).findIndex((function(e){return e===o}))?"":"U",".svg"))+")"},onClick:function(){return f(!0)}}),r.a.createElement("p",{className:"contest__numLikes"},d.likes-d.dislikes))):null))};n(115);var Z=Object(M.i)((function(){var e=Object(l.c)((function(e){return e.root.url})),t=Object(l.c)((function(e){return e.contests.curContest})),n=Object(M.h)().id,c=Object(l.b)();return Object(a.useEffect)((function(){function t(){return(t=Object(P.a)(I.a.mark((function t(){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.get("".concat(e,"contests/").concat(n));case 3:a=t.sent,c(w(a.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n,e,c]),r.a.createElement("div",{className:"contestPage"},r.a.createElement("div",{className:"contestPage__background"}),t?r.a.createElement(Q,{contestId:n}):null)})),ee=(n(116),[{title:"Sign up",description:"Sign up to TopImage to create contests or see previous contests created by others"},{title:"Create a contest",description:"Click on the New Top Image button to create your own contest"},{title:"Choose contest options",description:"Choose a name and topic for your contest. Select also an end date for it. Finally, you can add your own images or let the app choose their own's based on the topic"},{title:"View contests",description:"See all the current running contests in the grid below"},{title:"Search",description:"Use the search bar to filter contests by name. You can also choose a range of dates and whether the contest has finished or not"},{title:"Go into a contest",description:"Click on a contest preview to go into its details"},{title:"Select an image",description:"Select an image you like from the list on the left to see it bigger and be able to rate it"},{title:"Rate an image",description:"Use the like and dislike options below to rate the image"}]);var te=Object(M.i)((function(e){return r.a.createElement("div",{className:"tutorial"},r.a.createElement("h1",{className:"tutorial__title"},"Tutorial"),r.a.createElement("button",{className:"tutorial__button",onClick:function(){return e.history.push("/")}},"Go to main"),r.a.createElement("div",{className:"tutorial__list"},ee.map((function(e,t){return r.a.createElement("div",{className:"tutorial__item",key:t},r.a.createElement("hr",null),r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description),r.a.createElement("img",{src:n(117)("./tuto"+(t+1)+".png"),alt:"Tutorial step"}))}))))}));n(126);var ne=function(){var e=Object(a.useState)(!1),t=Object(F.a)(e,2),c=t[0],o=t[1],s=Object(a.useState)(!1),i=Object(F.a)(s,2),u=i[0],m=i[1],p=Object(l.b)(),f=function(){d(),p(g())};return r.a.createElement("nav",{className:"nav ".concat(u?"nav--active":"")},r.a.createElement("div",{className:"nav__header"},r.a.createElement("h1",null,r.a.createElement(U.b,{className:"nav__logo",to:"/"},"TOP IMAGE")),r.a.createElement("button",{className:"nav__toggle",onClick:function(){m(!u)}},r.a.createElement("img",{src:n(127),alt:"Toggler for menu when on mobile"}))),r.a.createElement("div",{className:"".concat(u?"nav__actions--active":"nav__actions")},r.a.createElement(U.c,{exact:!0,className:"nav__link",activeClassName:"nav__link--active",to:"/"},"Home"),r.a.createElement("div",{className:"nav__user"},r.a.createElement("a",{href:"/tutorial",target:"_blank"}," ",r.a.createElement("img",{className:"nav__userIcon",src:n(128),alt:"help"})),r.a.createElement("img",{className:"nav__userIcon",src:n(129),alt:"user",onClick:function(){return o(!c)}})),r.a.createElement("div",{className:"nav__user--responsive"},r.a.createElement(U.c,{exact:!0,className:"nav__link",activeClassName:"nav__link--active",to:"/tutorial"},"Tutorial"),r.a.createElement("button",{onClick:f,className:"nav__mockLink"},"Log Out"))),c?r.a.createElement("div",{className:"nav__modal"},r.a.createElement("p",{className:"nav__modalOption",onClick:f},"Cerrar sesi\xf3n")):null)};var ae=function(){var e=Object(l.c)((function(e){return e.auth.token}));return r.a.createElement(U.a,null,e?r.a.createElement(ne,null):null,r.a.createElement(M.d,null,r.a.createElement(M.b,{path:"/tutorial",component:te}),r.a.createElement(M.b,{path:"/",exact:!0,render:function(){return e?r.a.createElement(q,null):r.a.createElement(M.a,{to:"/login"})}}),r.a.createElement(M.b,{path:"/login",render:function(){return e?r.a.createElement(M.a,{to:"/"}):r.a.createElement(R,null)}}),r.a.createElement(M.b,{path:"/contests/:id",render:function(){return e?r.a.createElement(Z,null):r.a.createElement(M.a,{to:"/login"})}}),r.a.createElement(M.b,{path:"*",render:function(){return r.a.createElement(M.a,{to:"/login"})}})))},re=n(69),ce=n.n(re),oe=n(21);var le=function(){var e=Object(l.c)((function(e){return e.root.url})),t=Object(l.c)((function(e){return e.root.socketUrl})),n=Object(l.c)((function(e){return e.auth.token})),c=Object(l.b)();return Object(a.useEffect)((function(){function a(){return(a=Object(P.a)(I.a.mark((function t(){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.get("".concat(e,"contests"),{headers:{Authorization:"Bearer ".concat(n)}});case 3:a=t.sent,c(j(a.data)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}();var r=function(){var e=ce()(t);return e.on(oe.CONTEST_EVENT,(function(e){switch(e.action){case oe.ACTION_INSERT:return c(N(e.payload));case oe.ACTION_DELETE:return c(k(e.payload));case oe.ACTION_UPDATE:return c(y(e.payload));default:return}})),e}();return function(){return r.disconnect()}}),[c,t,n,e]),r.a.createElement(ae,null)};var se=function(){return r.a.createElement(l.a,{store:S},r.a.createElement(le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[70,1,2]]]);
//# sourceMappingURL=main.b9aa24e6.chunk.js.map